[
  {
    "id": "kx-github_issue-feda24fc95ad",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/86",
    "title": "issue in release 1.3.3",
    "text": "# issue in release 1.3.3\n\n\r\nFatal Python error: initfsencoding: unable to load the file system codec\r\nModuleNotFoundError: No module named 'encodings'\r\n\r\nCurrent thread 0x00003a70 (most recent call first):\n\n## Top Comments\n\n**cmccarthy1**: Have you updated both your p.q and p.dll files in `%QHOME%` and `%QHOME%\\w64` with the new release?\r\n\r\nThe functions that control initialisation of embedPy changed from 1.3.2 to 1.3.3\n\n---\n\n**cmccarthy1**: @swat-agarwal \r\n\r\nWe've tested the release locally with the appropriate `p.q` and `p.dll` added to the `%QHOME%` and `%QHOME%\\w64` respectively and it was tested on appveyor prior to release, unfortunately we have not been able to reproduce your error.\r\n\r\nThat error generally arises from issues with multiple versions of python which are attempting to be accessed but we haven't been able to reproduce the issue locally.\r\n\r\nIs there anything particularly unusual about your setup?\n\n---\n\n**swat-agarwal**: I dont get the error with the older version of embedPy 1.3.2\n\nOn Fri, May 22, 2020 at 6:13 PM cmccarthy1 <notifications@github.com> wrote:\n\n> @swat-agarwal <https://github.com/swat-agarwal>\n>\n> We've tested the release locally with the appropriate p.q and p.dll added\n> to the %QHOME% and %QHOME%\\w64 respectively and it was tested on appveyor\n> prior to release, unfortunately we have not been able to reproduce your\n> error.\n>\n> That error generally arises from issues with multiple versions of python\n> which are attempting to be accessed but we haven't been able to reproduce\n> the issue locally.\n>\n> Is there anything particularly unusual about your setup?\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/KxSystems/embedPy/issues/86#issuecomment-632671778>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AOHLV2IBOJNYXHQK67JEHKTRSZXOLANCNFSM4NHWUHJA>\n> .\n>\n\n\n---\n\n**cmccarthy1**: Understood, in order to debug the problem we're going to need information about how the setup was completed and your system. \r\n\r\nPer my previous message\r\n> Have` you updated both your p.q and p.dll files in %QHOME% and %QHOME%\\w64 with the new release?\r\n\r\nCould you please also supply the following information about your environment\r\n\r\nFrom console:\r\n```\r\npython3 --version\r\n```\r\n\r\nFrom a q session\r\n```\r\nq).z.k\r\nq).z.K\r\n```\r\nFinally are you running in a virtual environment?\n\n---\n\n**swat-agarwal**: Python 3.7.7\n\n2020.05.04\n\nNo I am not running on virtual environment\n\nOn Sat, May 23, 2020 at 11:13 AM cmccarthy1 <notifications@github.com>\nwrote:\n\n> Understood, in order to debug the problem we're going to need information\n> about how the setup was completed and your system.\n>\n> Per my previous message\n>\n> Have` you updated both your p.q and p.dll files in %QHOME% and %QHOME%\\w64\n> with the new release?\n>\n> Could you please also supply the following information about your\n> environment\n>\n> From console:\n>\n> python3 --version\n>\n> From a q session\n>\n> q).z.k\n> q).z.K\n>\n> Finally are you running in a virtual environment?\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/KxSystems/embedPy/issues/86#issuecomment-632989696>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AOHLV2PMOXW5YLYVLW3FPRLRS5PBJANCNFSM4NHWUHJA>\n> .\n>\n\n\n---\n\n**swat-agarwal**: any solution to this\n\n---\n\n**cmccarthy1**: We have not been able to reproduce the error to date as such cannot provide a solution as yet.\r\n\r\nPer my message in issue #85 there should be no material difference in the operation of 1.3.2 and 1.3.3 the change between the two versions is an update to tests and the addition of support for virtual environments. Issue #85 had been due to a change in syntax for versions of tensor flow not an issue with the interface and as such is stable for use.\r\n\r\nOnce we can reproduce this error we will update this issue. Apologies for any inconvenience caused\n\n---\n\n**swat-agarwal**: how can issue #85 be solved with 1.3.2\n\n---\n\n**cmccarthy1**: If you replace the `tests/tensorflow.t` file that is contained in the current master branch or release `1.3.3` with the one that was contained within the `1.3.2` the tests should run with the version of tensorflow you have on your system.\n\n---\n\n**cmccarthy1**: I've deleted release 1.3.3 for the time being, this bug was found with another user. This was related to a change to support virtual environments. \r\n\r\nI've released 1.3.4 which reverts to the embedPy code used in 1.3.2 but with the addition of the new version of `tests/tensorflow.t`",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 715,
    "metadata": {
      "issue_number": 86,
      "state": "closed",
      "labels": [],
      "comments_count": 13,
      "created_at": "2020-05-22T11:29:22Z",
      "updated_at": "2020-05-29T15:04:53Z",
      "closed_at": "2020-05-29T15:04:53Z",
      "author": "swat-agarwal",
      "top_comments": [
        "**cmccarthy1**: Have you updated both your p.q and p.dll files in `%QHOME%` and `%QHOME%\\w64` with the new release?\r\n\r\nThe functions that control initialisation of embedPy changed from 1.3.2 to 1.3.3",
        "**cmccarthy1**: @swat-agarwal \r\n\r\nWe've tested the release locally with the appropriate `p.q` and `p.dll` added to the `%QHOME%` and `%QHOME%\\w64` respectively and it was tested on appveyor prior to release, unfortunately we have not been able to reproduce your error.\r\n\r\nThat error generally arises from issues with multiple versions of python which are attempting to be accessed but we haven't been able to reproduce the issue locally.\r\n\r\nIs there anything particularly unusual about your setup?",
        "**swat-agarwal**: I dont get the error with the older version of embedPy 1.3.2\n\nOn Fri, May 22, 2020 at 6:13 PM cmccarthy1 <notifications@github.com> wrote:\n\n> @swat-agarwal <https://github.com/swat-agarwal>\n>\n> We've tested the release locally with the appropriate p.q and p.dll added\n> to the %QHOME% and %QHOME%\\w64 respectively and it was tested on appveyor\n> prior to release, unfortunately we have not been able to reproduce your\n> error.\n>\n> That error generally arises from issues with multiple versions of python\n> which are attempting to be accessed but we haven't been able to reproduce\n> the issue locally.\n>\n> Is there anything particularly unusual about your setup?\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/KxSystems/embedPy/issues/86#issuecomment-632671778>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AOHLV2IBOJNYXHQK67JEHKTRSZXOLANCNFSM4NHWUHJA>\n> .\n>\n",
        "**cmccarthy1**: Understood, in order to debug the problem we're going to need information about how the setup was completed and your system. \r\n\r\nPer my previous message\r\n> Have` you updated both your p.q and p.dll files in %QHOME% and %QHOME%\\w64 with the new release?\r\n\r\nCould you please also supply the following information about your environment\r\n\r\nFrom console:\r\n```\r\npython3 --version\r\n```\r\n\r\nFrom a q session\r\n```\r\nq).z.k\r\nq).z.K\r\n```\r\nFinally are you running in a virtual environment?",
        "**swat-agarwal**: Python 3.7.7\n\n2020.05.04\n\nNo I am not running on virtual environment\n\nOn Sat, May 23, 2020 at 11:13 AM cmccarthy1 <notifications@github.com>\nwrote:\n\n> Understood, in order to debug the problem we're going to need information\n> about how the setup was completed and your system.\n>\n> Per my previous message\n>\n> Have` you updated both your p.q and p.dll files in %QHOME% and %QHOME%\\w64\n> with the new release?\n>\n> Could you please also supply the following information about your\n> environment\n>\n> From console:\n>\n> python3 --version\n>\n> From a q session\n>\n> q).z.k\n> q).z.K\n>\n> Finally are you running in a virtual environment?\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/KxSystems/embedPy/issues/86#issuecomment-632989696>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AOHLV2PMOXW5YLYVLW3FPRLRS5PBJANCNFSM4NHWUHJA>\n> .\n>\n"
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-72d82e1806ef",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/119",
    "title": "Fastest way to convert large kdb tables to pandas dataframes",
    "text": "# Fastest way to convert large kdb tables to pandas dataframes\n\nWhat is the correct way to convert a large generic kdb table to a pandas dataframe? Could you share something similar to pyq's conversion function,\r\n\r\n```\r\ndef to_pandas(tbl):\r\n    \"\"\"\r\n    Converts a kdb+ table to Pandas DataFrame\r\n    \"\"\"\r\n    df = pd.DataFrame()\r\n    for c in tbl.cols:\r\n        if (str(q('meta', tbl)[c]['t']) == 's') and getattr(tbl, c).inspect(b't') >= 20:\r\n            d = list(q('sym',numpy.asarray(tbl[c].data)))\r\n        elif str(q('meta', tbl)[c]['t']) == 'C':\r\n            d = [str(x) for x in tbl[c]]\r\n        else:\r\n            d = numpy.asarray(tbl[c])\r\n        df[c] = d\r\n    return df\r\n```\r\n\r\nFor example the function .ml.df2tab offered by Kx/ml is very slow:\r\n\r\n```\r\ni.pandasDF:.p.import[`pandas]`:DataFrame\r\n\r\n// @kind function\r\n// @category utilities\r\n// @desc Convert q table to Pandas dataframe\r\n// @param tab {table} A q table\r\n// @return {<} a Pandas dataframe\r\n.ml.tab2df:{[tab]\r\n  updTab:@[flip 0!tab;i.findCols[tab;\"c\"];enlist each];\r\n  transformTab:@[updTab;i.findCols[tab]\"pmdznuvt\";i.q2npDate];\r\n  pandasDF:i.pandasDF[transformTab][@;cols tab];\r\n  $[count keyTab:keys tab;\r\n    pandasDF[`:set_index]keyTab;\r\n    pandasDF\r\n    ]\r\n  }\r\n\r\n\r\nN:10000000\r\ndat:([]date:2001.01.01; sym:`A; qty:N?100f)\r\n\\t .ml.tab2df dat\r\n55440\r\n```\r\n\n\n## Top Comments\n\n**rianoc-kx**: If possible for you to use instead, PyKX will offer much improved performance here: https://code.kx.com/pykx/2.5/pykx-under-q/intro.html\r\n\r\nPyKX enabled personal license: https://kx.com/kdb-insights-personal-edition-license-download/\r\n\r\nInstall:\r\n```bash\r\npip install pykx\r\npython -c \"import pykx;pykx.install_into_QHOME()\"\r\n```\r\n\r\n```q\r\nq)\\l pykx.q\r\nq)N:10000000\r\nq)dat:([]date:2001.01.01; sym:`A; qty:N?100f)\r\nq)\\t .pykx.print .pykx.topd[dat]\r\n                date sym        qty\r\n  0       2001-01-01   A  39.275238\r\n  1       2001-01-01   A  51.709112\r\n  2       2001-01-01   A  51.597965\r\n  3       2001-01-01   A  40.666419\r\n  4       2001-01-01   A  17.808386\r\n  ...            ...  ..        ...\r\n  9999995 2001-01-01   A  56.748184\r\n  9999996 2001-01-01   A  38.299587\r\n  9999997 2001-01-01   A  28.465881\r\n  9999998 2001-01-01   A  54.208987\r\n  9999999 2001-01-01   A  45.436839\r\n\r\n  [10000000 rows x 3 columns]\r\n143\r\n```\n\n---\n\n**antipisa**: @rianoc-kx  We have a lot of existing systems in embedpy and cannot just switch to using pykx though I understand kx has been pushing for this. Is there any way to replicate the .pykx.topd logic within embedpy?\n\n---\n\n**cmccarthy1**: Hi @antipisa,\r\n\r\nUnfortunately there isn't a straightforward way of doing this, the approach PyKX takes to do this as efficiently as possible is quiet low-level and a significant amount of effort to rework would be needed for it to work with embedPy. Conceptually embedPy has no understanding of kdb+ table objects and it's approach to handling data is ultimately to assume a 1-to-1 mapping between numpy and q vectors at all times. We would need to introduce that concept and I'd estimate that the work to do it would be ~1-2 months.\r\n\r\nThe equivalent of the `topd` really as it stands now is the ML Toolkit functionality for doing this, there may be some optimisations but as Rian points out PyKX really is where most of our efforts are concentrated today on Python/q integration.\r\n\r\nConor\n\n---\n\n**antipisa**: Ok, but as with pyq there must be a way to handle columns more efficiently by type. For instance this works in pyq:\r\n\r\n```\r\n\r\ndef tab2df(Kobj):\r\n\tc = q.cols(Kobj)\r\n\tc1 = Kobj.meta.exec(\"c\", where='t in \"bxhijef\"')\r\n\tdf = pd.DataFrame(dict(q(\"{$[count x; flip x#y; ()!()]}\", c1, Kobj)))\r\n\tfor col in q.except_(c,c1):\r\n\t\ttry:\r\n\t\t\tdf[col] = Kobj[col]\r\n\t\texcept AttributeError:\r\n\t\t\tdf[col] = np.array(K[col], dtype='str')\r\n\treturn df\r\n\r\n```\n\n---\n\n**antipisa**: @cmccarthy1  @rianoc-kx , you cannot keep releasing versions of kdb that integrate with python like embedpy and pyq, and then decommission them by forcing people to pay extra to use pykx. That's a total racket. Those who pay for kdb core licenses should be allowed to stay on older versions of pyq or embedpy -- or you should make pykx free. Creating new spinoff versions of pyq -- which incidentally was free -- and then withholding answers to the most basic questions is reprehensible. \r\n\n\n---\n\n**cmccarthy1**: Hi @antipisa \r\n\r\nApologies for the delay in response, we were looking into the issue to balance if a solution like the one you have suggested would be reasonable to integrate.\r\n\r\nI understand your frustration at this and appreciate the feedback, we'll look to integrate something akin to the above in the ML-Toolkit rather than embedPy itself, as I mentioned previously the vast majority of embedPy is very low level and the addition of a dependency on Pandas for embedPy is something I would prefer us to avoid. It will likely be next week by the time we have a handle on what, if anything we can provide as a performance update.\r\n\r\nConor  \n\n---\n\n**cmccarthy1**: @antipisa just for clarity with regards to your setup, what version of Pandas are you using?\n\n---\n\n**cmccarthy1**: This is a WIP but is ~ 10x faster\r\n\r\n```q\r\ntab2df2:{\r\n  c:cols x;\r\n  c1:i.findCols[x;\"bxhijef\"];\r\n  df:i.pandasDF[{$[count y;y!x y;()!()]}[x;c1]];\r\n  cls:c except c1;\r\n  if[0=count cls;:df];\r\n  updTab:@[flip 0!x;i.findCols[x;\"c\"];enlist each];\r\n  timeCols:i.findCols[x;\"pmdznuvt\"];\r\n  timeTab:?[updTab;();0b;timeCols!timeCols];\r\n  timeTab:@[timeTab;timeCols;{dateConvert:(\"p\"$@[4#+[\"d\"$0];-16+type x]x)-\"p\"$1970.01m}];\r\n  df:{x[`:assign][z pykw .p.import[`numpy;`:array][y z;\"datetime64[ns]\"]]}/[df;count[timeCols]#enlist timeTab;timeCols];\r\n  {x[=;z;enlist $[11h=type dat:y z;string dat;dat]]}[df;updTab]each cls except timeCols;\r\n  df:df[`:reindex][`columns pykw c];\r\n  $[count keyTab:keys x;\r\n    df[`:set_index]keyTab;\r\n    df\r\n    ]\r\n }\r\n```\r\n\r\nI'll need to test it but should be able to integrate into the ML Toolkit as a replacement for current behaviour\r\n\r\n```q\r\nq)N:10000000\r\nq)dat:([]date:2001.01.01; sym:`A; qty:N?100f)\r\nq)\\t .ml.tab2df2[dat]\r\n744\r\nq)\\t .ml.tab2df[dat]\r\n9394\r\nq).ml.df2tab[.ml.tab2df2 dat]~.ml.df2tab .ml.tab2df[dat]\r\n1b\r\n```\n\n---\n\n**antipisa**: @cmccarthy1 is there an easier / simple raw conversion function that does not handle the timezone offsets dependency for pandas rather just does the standard kdb datatypes like float/timestamp/date/symbol? This would allow you to bypass pandas completely and just use numpy arrays. I am on pandas 2.2.1.\r\n\r\n\n\n---\n\n**cmccarthy1**: There isn't actually an issue with the timezones, the problem with timezones is in the reverse case namely going from dataframes to kdb tables. The implementation that's opened as an MR to the ML repository is a 1-to-1 match with the original behaviour as far as I can see from testing it. The comment on the timezones in the unedited message was a misunderstanding of the original issue",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 919,
    "metadata": {
      "issue_number": 119,
      "state": "closed",
      "labels": [],
      "comments_count": 12,
      "created_at": "2024-06-03T22:15:22Z",
      "updated_at": "2024-07-03T07:42:46Z",
      "closed_at": "2024-07-03T07:42:46Z",
      "author": "antipisa",
      "top_comments": [
        "**rianoc-kx**: If possible for you to use instead, PyKX will offer much improved performance here: https://code.kx.com/pykx/2.5/pykx-under-q/intro.html\r\n\r\nPyKX enabled personal license: https://kx.com/kdb-insights-personal-edition-license-download/\r\n\r\nInstall:\r\n```bash\r\npip install pykx\r\npython -c \"import pykx;pykx.install_into_QHOME()\"\r\n```\r\n\r\n```q\r\nq)\\l pykx.q\r\nq)N:10000000\r\nq)dat:([]date:2001.01.01; sym:`A; qty:N?100f)\r\nq)\\t .pykx.print .pykx.topd[dat]\r\n                date sym        qty\r\n  0       2001-01-01   A  39.275238\r\n  1       2001-01-01   A  51.709112\r\n  2       2001-01-01   A  51.597965\r\n  3       2001-01-01   A  40.666419\r\n  4       2001-01-01   A  17.808386\r\n  ...            ...  ..        ...\r\n  9999995 2001-01-01   A  56.748184\r\n  9999996 2001-01-01   A  38.299587\r\n  9999997 2001-01-01   A  28.465881\r\n  9999998 2001-01-01   A  54.208987\r\n  9999999 2001-01-01   A  45.436839\r\n\r\n  [10000000 rows x 3 columns]\r\n143\r\n```",
        "**antipisa**: @rianoc-kx  We have a lot of existing systems in embedpy and cannot just switch to using pykx though I understand kx has been pushing for this. Is there any way to replicate the .pykx.topd logic within embedpy?",
        "**cmccarthy1**: Hi @antipisa,\r\n\r\nUnfortunately there isn't a straightforward way of doing this, the approach PyKX takes to do this as efficiently as possible is quiet low-level and a significant amount of effort to rework would be needed for it to work with embedPy. Conceptually embedPy has no understanding of kdb+ table objects and it's approach to handling data is ultimately to assume a 1-to-1 mapping between numpy and q vectors at all times. We would need to introduce that concept and I'd estimate that the work to do it would be ~1-2 months.\r\n\r\nThe equivalent of the `topd` really as it stands now is the ML Toolkit functionality for doing this, there may be some optimisations but as Rian points out PyKX really is where most of our efforts are concentrated today on Python/q integration.\r\n\r\nConor",
        "**antipisa**: Ok, but as with pyq there must be a way to handle columns more efficiently by type. For instance this works in pyq:\r\n\r\n```\r\n\r\ndef tab2df(Kobj):\r\n\tc = q.cols(Kobj)\r\n\tc1 = Kobj.meta.exec(\"c\", where='t in \"bxhijef\"')\r\n\tdf = pd.DataFrame(dict(q(\"{$[count x; flip x#y; ()!()]}\", c1, Kobj)))\r\n\tfor col in q.except_(c,c1):\r\n\t\ttry:\r\n\t\t\tdf[col] = Kobj[col]\r\n\t\texcept AttributeError:\r\n\t\t\tdf[col] = np.array(K[col], dtype='str')\r\n\treturn df\r\n\r\n```",
        "**antipisa**: @cmccarthy1  @rianoc-kx , you cannot keep releasing versions of kdb that integrate with python like embedpy and pyq, and then decommission them by forcing people to pay extra to use pykx. That's a total racket. Those who pay for kdb core licenses should be allowed to stay on older versions of pyq or embedpy -- or you should make pykx free. Creating new spinoff versions of pyq -- which incidentally was free -- and then withholding answers to the most basic questions is reprehensible. \r\n"
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-c1f9ff8a9643",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/84",
    "title": "embedPy",
    "text": "# embedPy\n\nq)\\l p.q\r\n'libpython\r\n  [3]  M:\\q\\p.q:9:\r\n `L`M`H`B set'@[system\"python3 \",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];C:H~B;\r\n .p:(`:./p 2:(`init;3))[L;H;C]]\r\n    ^\r\n\r\nWhen I do at this point : <b>key each hsym each`$`L`M#.p</b>     I will get:\r\n\r\nL| `:C:\\Users\\serge\\AppData\\Local\\Programs\\Python\\Python38-32/python38.dll\r\n\r\nM| `q`Q`h`j`o`P`p\r\n\r\nPS: Hint: I only used the downloaded code in that link under \"embedPy\"  --> no conda installation\r\n\r\n\n\n## Top Comments\n\n**cmccarthy1**: Can you please point to the exact instructions that you followed to complete the install?\r\n\r\nIt appears that you install has been somehow corrupted (the value for `M` in your evaluation should also point to a file location). \r\n\r\nAs you may have seen [here](https://code.kx.com/q/ml/embedpy/faq/). This issue arises usually when the install of Python does not have access to the Python shared object.\n\n---\n\n**thxx1138**: In the overview page under “Build and install” it is mentioned “Download the from KxSystems/embedPy” and follow installation there … so I downloaded the zipped code and unzipped into my Q directory. But I did not see any “installation instructions” … so I was assuming it is enough to start Kdb+ and load the p.q script\n\n \n\nBtw: I use Windows 10 / 64-bit and Q version 3.7t  \n\n \n\nFrom: cmccarthy1 <notifications@github.com> \nSent: Montag, 23. März 2020 17:47\nTo: KxSystems/embedPy <embedPy@noreply.github.com>\nCc: thxx1138 <ondrus@gmail.com>; Author <author@noreply.github.com>\nSubject: Re: [KxSystems/embedPy] embedPy (#84)\n\n \n\nCan you please point to the exact instructions that you followed to complete the install?\n\nIt appears that you install has been somehow corrupted (the value for M in your evaluation should also point to a file location).\n\nAs you may have seen here <https://code.kx.com/q/ml/embedpy/faq/> . This issue arises usually when the install of Python does not have access to the Python shared object.\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub <https://github.com/KxSystems/embedPy/issues/84#issuecomment-602721355> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AL7CUYB7IMLOK5JBW7O4Z7DRI6HADANCNFSM4LSAIDBA> .  <https://github.com/notifications/beacon/AL7CUYDR5XUNAVVCQ4KWGETRI6HADA5CNFSM4LSAIDBKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEPWMYSY.gif> \n\n\n\n---\n\n**cmccarthy1**: Ok, thanks! \r\n\r\nCould you check that unzipping resulted in the `p.dll` file being populated in your `%QHOME%/w64` directory?\n\n---\n\n**thxx1138**: Yes, its all in w64 – also the p.dll\n\n \n\nFrom: cmccarthy1 <notifications@github.com> \nSent: Montag, 23. März 2020 18:47\nTo: KxSystems/embedPy <embedPy@noreply.github.com>\nCc: thxx1138 <ondrus@gmail.com>; Author <author@noreply.github.com>\nSubject: Re: [KxSystems/embedPy] embedPy (#84)\n\n \n\nOk, thanks!\n\nCould you check that unzipping resulted in the p.dll file being populated in your %QHOME%/w64 directory?\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub <https://github.com/KxSystems/embedPy/issues/84#issuecomment-602755680> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AL7CUYCCDYI2XSQCYB5H6L3RI6OCZANCNFSM4LSAIDBA> .  <https://github.com/notifications/beacon/AL7CUYEEZQXNR4ICJKERV5LRI6OCZA5CNFSM4LSAIDBKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEPWVEYA.gif> \n\n\n\n---\n\n**thxx1138**: Well. My QHOME includes w64, as the q executable is also there\n\n \n\nFrom:  <milan_ondrus@hispeed.ch> \nSent: Montag, 23. März 2020 19:04\nTo: 'KxSystems/embedPy' <reply@reply.github.com>\nSubject: RE: [KxSystems/embedPy] embedPy (#84)\n\n \n\nYes, its all in w64 – also the p.dll\n\n \n\nFrom: cmccarthy1 <notifications@github.com <mailto:notifications@github.com> > \nSent: Montag, 23. März 2020 18:47\nTo: KxSystems/embedPy <embedPy@noreply.github.com <mailto:embedPy@noreply.github.com> >\nCc: thxx1138 <ondrus@gmail.com <mailto:ondrus@gmail.com> >; Author <author@noreply.github.com <mailto:author@noreply.github.com> >\nSubject: Re: [KxSystems/embedPy] embedPy (#84)\n\n \n\nOk, thanks!\n\nCould you check that unzipping resulted in the p.dll file being populated in your %QHOME%/w64 directory?\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub <https://github.com/KxSystems/embedPy/issues/84#issuecomment-602755680> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AL7CUYCCDYI2XSQCYB5H6L3RI6OCZANCNFSM4LSAIDBA> .  <https://github.com/notifications/beacon/AL7CUYEEZQXNR4ICJKERV5LRI6OCZA5CNFSM4LSAIDBKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEPWVEYA.gif> \n\n\n\n---\n\n**thxx1138**: One issue I found ... the Environment variable LD_LIBRARY_PATH was missing \n\n \n\nNow I get the following error:\n\n \n\n'Das angegebene Modul wurde nicht gefunden.\n\n  [3]  M:\\q\\w64\\p.q:9:\n\n`L`M`H`B set'@[system\"python3 \",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];C:H~B;\n\n.p:(`:./p 2:(`init;3))[L;H;C]]\n\n \n\nThat German text there means “That Module was not found”\n\nThe values:\n\n \n\nL is \"C:\\\\Users\\\\serge\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python38-32/python38.dll\"\n\nM is \"\" \n\nB and H are both: \"C:\\\\Users\\\\serge\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python38-32\"\n\nC is 1b\n\n \n\n \n\nFrom: cmccarthy1 <notifications@github.com> \nSent: Montag, 23. März 2020 18:47\nTo: KxSystems/embedPy <embedPy@noreply.github.com>\nCc: thxx1138 <ondrus@gmail.com>; Author <author@noreply.github.com>\nSubject: Re: [KxSystems/embedPy] embedPy (#84)\n\n \n\nOk, thanks!\n\nCould you check that unzipping resulted in the p.dll file being populated in your %QHOME%/w64 directory?\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub <https://github.com/KxSystems/embedPy/issues/84#issuecomment-602755680> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AL7CUYCCDYI2XSQCYB5H6L3RI6OCZANCNFSM4LSAIDBA> .  <https://github.com/notifications/beacon/AL7CUYEEZQXNR4ICJKERV5LRI6OCZA5CNFSM4LSAIDBKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEPWVEYA.gif> \n\n\n\n---\n\n**cmccarthy1**: By the look of the code I don't think you're using the same `p.q` that was in the zipped file [here](https://github.com/KxSystems/embedPy/releases)?\r\n\r\nSupport was added for users using virtual environments [here](https://github.com/KxSystems/embedPy/pull/81) and this code has the addition of the C parameter you're highlighting. This should not have been in the zipped directory?\n\n---\n\n**thxx1138**: But in that  “embedPy-1.3.2.zip” I don’t see the p.dll\n\n \n\nFrom: cmccarthy1 <notifications@github.com> \nSent: Montag, 23. März 2020 21:15\nTo: KxSystems/embedPy <embedPy@noreply.github.com>\nCc: thxx1138 <ondrus@gmail.com>; Author <author@noreply.github.com>\nSubject: Re: [KxSystems/embedPy] embedPy (#84)\n\n \n\nBy the look of the code I don't think you're using the same p.q that was in the zipped file here <https://github.com/KxSystems/embedPy/releases> ?\n\nSupport was added for users using virtual environments here <https://github.com/KxSystems/embedPy/pull/81>  and this code has the addition of the C parameter you're highlighting. This should not have been in the zipped directory?\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub <https://github.com/KxSystems/embedPy/issues/84#issuecomment-602831313> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AL7CUYFYXM34WZATVK6BNETRI67MPANCNFSM4LSAIDBA> .  <https://github.com/notifications/beacon/AL7CUYASMP5PUT5LRXJWW73RI67MPA5CNFSM4LSAIDBKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEPXHTUI.gif> \n\n\n\n---\n\n**cmccarthy1**: At this address https://github.com/KxSystems/embedPy/releases within this folder embedPy_windows-1.3.2.zip the `p.dll` will be in the w64 folder in the unzipped file. This should  be added to your `%QHOME%/w64` and the contents in the root of that file added to your `%QHOME%` directory\n\n---\n\n**cmccarthy1**: @thxx1138 Did you get this fixed?",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 853,
    "metadata": {
      "issue_number": 84,
      "state": "closed",
      "labels": [],
      "comments_count": 11,
      "created_at": "2020-03-23T16:39:42Z",
      "updated_at": "2020-04-05T15:01:34Z",
      "closed_at": "2020-04-05T15:01:34Z",
      "author": "thxx1138",
      "top_comments": [
        "**cmccarthy1**: Can you please point to the exact instructions that you followed to complete the install?\r\n\r\nIt appears that you install has been somehow corrupted (the value for `M` in your evaluation should also point to a file location). \r\n\r\nAs you may have seen [here](https://code.kx.com/q/ml/embedpy/faq/). This issue arises usually when the install of Python does not have access to the Python shared object.",
        "**thxx1138**: In the overview page under “Build and install” it is mentioned “Download the from KxSystems/embedPy” and follow installation there … so I downloaded the zipped code and unzipped into my Q directory. But I did not see any “installation instructions” … so I was assuming it is enough to start Kdb+ and load the p.q script\n\n \n\nBtw: I use Windows 10 / 64-bit and Q version 3.7t  \n\n \n\nFrom: cmccarthy1 <notifications@github.com> \nSent: Montag, 23. März 2020 17:47\nTo: KxSystems/embedPy <embedPy@noreply.github.com>\nCc: thxx1138 <ondrus@gmail.com>; Author <author@noreply.github.com>\nSubject: Re: [KxSystems/embedPy] embedPy (#84)\n\n \n\nCan you please point to the exact instructions that you followed to complete the install?\n\nIt appears that you install has been somehow corrupted (the value for M in your evaluation should also point to a file location).\n\nAs you may have seen here <https://code.kx.com/q/ml/embedpy/faq/> . This issue arises usually when the install of Python does not have access to the Python shared object.\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub <https://github.com/KxSystems/embedPy/issues/84#issuecomment-602721355> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AL7CUYB7IMLOK5JBW7O4Z7DRI6HADANCNFSM4LSAIDBA> .  <https://github.com/notifications/beacon/AL7CUYDR5XUNAVVCQ4KWGETRI6HADA5CNFSM4LSAIDBKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEPWMYSY.gif> \n\n",
        "**cmccarthy1**: Ok, thanks! \r\n\r\nCould you check that unzipping resulted in the `p.dll` file being populated in your `%QHOME%/w64` directory?",
        "**thxx1138**: Yes, its all in w64 – also the p.dll\n\n \n\nFrom: cmccarthy1 <notifications@github.com> \nSent: Montag, 23. März 2020 18:47\nTo: KxSystems/embedPy <embedPy@noreply.github.com>\nCc: thxx1138 <ondrus@gmail.com>; Author <author@noreply.github.com>\nSubject: Re: [KxSystems/embedPy] embedPy (#84)\n\n \n\nOk, thanks!\n\nCould you check that unzipping resulted in the p.dll file being populated in your %QHOME%/w64 directory?\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub <https://github.com/KxSystems/embedPy/issues/84#issuecomment-602755680> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AL7CUYCCDYI2XSQCYB5H6L3RI6OCZANCNFSM4LSAIDBA> .  <https://github.com/notifications/beacon/AL7CUYEEZQXNR4ICJKERV5LRI6OCZA5CNFSM4LSAIDBKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEPWVEYA.gif> \n\n",
        "**thxx1138**: Well. My QHOME includes w64, as the q executable is also there\n\n \n\nFrom:  <milan_ondrus@hispeed.ch> \nSent: Montag, 23. März 2020 19:04\nTo: 'KxSystems/embedPy' <reply@reply.github.com>\nSubject: RE: [KxSystems/embedPy] embedPy (#84)\n\n \n\nYes, its all in w64 – also the p.dll\n\n \n\nFrom: cmccarthy1 <notifications@github.com <mailto:notifications@github.com> > \nSent: Montag, 23. März 2020 18:47\nTo: KxSystems/embedPy <embedPy@noreply.github.com <mailto:embedPy@noreply.github.com> >\nCc: thxx1138 <ondrus@gmail.com <mailto:ondrus@gmail.com> >; Author <author@noreply.github.com <mailto:author@noreply.github.com> >\nSubject: Re: [KxSystems/embedPy] embedPy (#84)\n\n \n\nOk, thanks!\n\nCould you check that unzipping resulted in the p.dll file being populated in your %QHOME%/w64 directory?\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub <https://github.com/KxSystems/embedPy/issues/84#issuecomment-602755680> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AL7CUYCCDYI2XSQCYB5H6L3RI6OCZANCNFSM4LSAIDBA> .  <https://github.com/notifications/beacon/AL7CUYEEZQXNR4ICJKERV5LRI6OCZA5CNFSM4LSAIDBKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEPWVEYA.gif> \n\n"
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-1dd7c9ed4be0",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/63",
    "title": "Installation fail on windows",
    "text": "# Installation fail on windows\n\nHello,\r\n\r\nWhen installing on windows, I run into this issue when running the tests or launching p.q:\r\n\r\n```\r\n'libpython\r\n  [4]  C:\\Users\\Mehdi Tomas\\Downloads\\embedPy_windows-1.3.1\\p.q:8:\r\n `L`M`H set'@[system\"python3 \",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];\r\n .p:(`:./p 2:(`init;2))[L;H]]\r\n    ^\r\n  [0]  (<load>)\r\n```\r\nI get the same error if I try installing from a release or with Anaconda.\r\n\r\nSorry if I missed a step. I suspect this might have to do with my Python installation in Anaconda but I'm unsure. Thanks a lot for the help.\r\n\r\nSpecs:\r\n- KDB+ 3.6,  64bit\r\n- Python 3.6 64bit, Anaconda version\n\n## Top Comments\n\n**Dianeod**: Hi,\r\n\r\nWhat version of kdb+ are you using? You can find this with, .z.K and .z.k.\r\n\r\nThanks,\r\nDiane \n\n---\n\n**mehditomas**: Hi Diane,\r\n\r\nVersion 3.6.\n\n---\n\n**jhanna-kx**: Hi,\r\nHaven't been able to replicate this so far. \r\nCould you list the versions of the conda packages you have installed?\r\n```\r\nconda list \"python|kdb|embedpy\"\r\n```\r\n\r\nAnd also the output from these two \r\n```\r\nwhere q\r\nwhere python3\r\n```\r\nThanks\r\n\r\n \r\n\n\n---\n\n**jhanna-kx**: Also could you check if you have 32 bit or 64 bit python installed (embedPy requires 64 bit)\r\n```\r\nC:\\Users\\james>python -VV\r\nPython 3.7.1 (v3.7.1:260ec2c36a, Oct 20 2018, 14:57:15) [MSC v.1915 64 bit (AMD64)]\r\nC:\\Users\\james>echo p)print('embedPy')|q\r\nembedPy\r\n\r\nC:\\Users\\james>\r\n```\r\nThanks\n\n---\n\n**mehditomas**: Hi James, I ran the queries you mentionned:\r\n\r\n![image](https://user-images.githubusercontent.com/19539235/47510158-dc16f500-d877-11e8-8874-402b831274b6.png)\r\n\r\nIt seems I do have the 64 bit version of python.\n\n---\n\n**jhanna-kx**: Thanks for posting those, I'm not certain this is the issue, but it looks like there are a mixture of python installs on there with `python3` being non anaconda python, but `python`  and `q` being conda versions.\r\n\r\nCould you remove the non anaconda `python3` from your PATH entirely and try running `q p.q`. \r\n\r\nThe conda packaged version of embedPy probably won't work with the non anaconda python and `p.q` will first try to run `python3` before `python` . \r\n\r\nJames\r\n\n\n---\n\n**elopezaguilera**: Closing this issue. Feel free to reopen if the previous solution hasn't solved the problem.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 324,
    "metadata": {
      "issue_number": 63,
      "state": "closed",
      "labels": [],
      "comments_count": 7,
      "created_at": "2018-10-16T21:08:50Z",
      "updated_at": "2018-12-04T16:29:48Z",
      "closed_at": "2018-12-04T16:29:48Z",
      "author": "mehditomas",
      "top_comments": [
        "**Dianeod**: Hi,\r\n\r\nWhat version of kdb+ are you using? You can find this with, .z.K and .z.k.\r\n\r\nThanks,\r\nDiane ",
        "**mehditomas**: Hi Diane,\r\n\r\nVersion 3.6.",
        "**jhanna-kx**: Hi,\r\nHaven't been able to replicate this so far. \r\nCould you list the versions of the conda packages you have installed?\r\n```\r\nconda list \"python|kdb|embedpy\"\r\n```\r\n\r\nAnd also the output from these two \r\n```\r\nwhere q\r\nwhere python3\r\n```\r\nThanks\r\n\r\n \r\n",
        "**jhanna-kx**: Also could you check if you have 32 bit or 64 bit python installed (embedPy requires 64 bit)\r\n```\r\nC:\\Users\\james>python -VV\r\nPython 3.7.1 (v3.7.1:260ec2c36a, Oct 20 2018, 14:57:15) [MSC v.1915 64 bit (AMD64)]\r\nC:\\Users\\james>echo p)print('embedPy')|q\r\nembedPy\r\n\r\nC:\\Users\\james>\r\n```\r\nThanks",
        "**mehditomas**: Hi James, I ran the queries you mentionned:\r\n\r\n![image](https://user-images.githubusercontent.com/19539235/47510158-dc16f500-d877-11e8-8874-402b831274b6.png)\r\n\r\nIt seems I do have the 64 bit version of python."
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-9855b4d7f8b5",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/62",
    "title": "numpy array conversion to q",
    "text": "# numpy array conversion to q\n\nin python 3.7 and numpy 1.15.2, q version 3.6 64bit\r\nthe numpy array cannot be converted to q data.\r\n\r\nall the testcases return 0\r\n\r\n\r\nt[12]~np[`:arange][*][12.]`\r\nt[12]~np[`:arange;*][12.]`\r\nt[12]~np[`:arange][*;12.]`\r\nt[12]~np[`:arange;*;12.]`\r\nt[12]~np[`:arange][12.]`\r\nt[12]~np[`:arange;12.]`\r\n\r\nt[12]~np[`:arange][<]12.\r\nt[12]~np[`:arange;<]12.\r\nt[12]~np[`:arange][<;12.]\r\nt[12]~np[`:arange;<;12.]\r\n\r\nt[12]~.p.py2q np[`:arange][>]12.\r\nt[12]~.p.py2q np[`:arange;>]12.\r\nt[12]~.p.py2q np[`:arange][>;12.]\r\nt[12]~.p.py2q np[`:arange;>;12.]\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n## Top Comments\n\n**ghlian**: \r\nt[12]~np[`:arange][*][12.]`\r\nt[12]~np[`:arange;*][12.]`\r\nt[12]~np[`:arange][*;12.]`\r\nt[12]~np[`:arange;*;12.]`\r\nt[12]~np[`:arange][12.]`\r\nt[12]~np[`:arange;12.]`\r\n\n\n---\n\n**ghlian**: used the test cases. the symbol ` is not shown in this post above\r\nt[12]~np[:arange][*][12.]`      get 0b\r\n\n\n---\n\n**Dianeod**: Hi,\r\n\r\nCould you please provide the code for what t is?\r\n\r\nIf t[12] is equivalent to the q function q)til 12 then the following should rectify the problem:\r\n\r\nq)t:{til x}\r\n\r\nq)t[12]~(np[`:arange;*][12]`)\r\n1b\r\n\r\n\r\nThanks,\r\nDiane \n\n---\n\n**ghlian**: the codes are simply the testcases in embedPy/tests/syntax.t\r\n\r\nAll return 0b.\r\nq)t[12] is working fine.\r\n\r\n\n\n---\n\n**ghlian**: however, in numpy 1.14.3 and q version 3.5 64bit, all the testcases return 1b.\n\n---\n\n**jhanna-kx**: Hi,\r\nI think there are were some issues with backticks \"\\`\" disappearing in the markdown.\r\n\r\nI haven't been able to replicate this so far using the latest version of embedPy and kdb+ 3.6 on any of linux, macOS or windows.\r\n\r\nCan you let us a few more details so we can try and replicate your issue.\r\n\r\n- Which OS?\r\n- Are you installing embedPy with the conda package?\r\n- If not using conda, was embedPy installed from a release from the releases page or cloned and built from source?\r\n - If you installed with a release, which version of embedPy was used?\r\n\r\nBelow is what I get by building from the latest version of the source (on linux in this case)\r\n\r\n```\r\n$ conda list numpy && conda list python\r\n# packages in environment at /home/james/anaconda3/envs/py37:\r\n#\r\n# Name                    Version                   Build  Channel\r\nnumpy                     1.15.2           py37h1d66e8a_1  \r\nnumpy-base                1.15.2           py37h81de0dd_1  \r\n# packages in environment at /home/james/anaconda3/envs/py37:\r\n#\r\n# Name                    Version                   Build  Channel\r\npython                    3.7.0                hc3d631a_0  \r\n$ q p.q\r\nKDB+ 3.6 2018.06.01 Copyright (C) 1993-2018 Kx Systems\r\nl64/ 8()core 64303MB ...\r\n\r\nq)np:.p.import`numpy\r\nq)t:\"f\"$til@\r\nq)t[12]~np[`:arange][*][12.]`\r\n1b\r\nq)t[12]~np[`:arange;*][12.]`\r\n1b\r\nq)t[12]~np[`:arange][*;12.]`\r\n1b\r\nq)t[12]~np[`:arange;*;12.]`\r\n1b\r\nq)t[12]~np[`:arange][12.]`\r\n1b\r\nq)t[12]~np[`:arange;12.]`\r\n1b\r\nq)t[12]~np[`:arange][<]12.\r\n1b\r\nq)t[12]~np[`:arange;<]12.\r\n1b\r\nq)t[12]~np[`:arange][<;12.]\r\n1b\r\nq)t[12]~np[`:arange;<;12.]\r\n1b\r\nq)\r\n\r\n```\n\n---\n\n**elopezaguilera**: Closing this issue. We have been able to replicate the issue with the provided info. Feel free to reopen with details so that we can replicate the issue.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 380,
    "metadata": {
      "issue_number": 62,
      "state": "closed",
      "labels": [],
      "comments_count": 7,
      "created_at": "2018-10-07T18:17:38Z",
      "updated_at": "2018-12-04T16:32:28Z",
      "closed_at": "2018-12-04T16:32:28Z",
      "author": "ghlian",
      "top_comments": [
        "**ghlian**: \r\nt[12]~np[`:arange][*][12.]`\r\nt[12]~np[`:arange;*][12.]`\r\nt[12]~np[`:arange][*;12.]`\r\nt[12]~np[`:arange;*;12.]`\r\nt[12]~np[`:arange][12.]`\r\nt[12]~np[`:arange;12.]`\r\n",
        "**ghlian**: used the test cases. the symbol ` is not shown in this post above\r\nt[12]~np[:arange][*][12.]`      get 0b\r\n",
        "**Dianeod**: Hi,\r\n\r\nCould you please provide the code for what t is?\r\n\r\nIf t[12] is equivalent to the q function q)til 12 then the following should rectify the problem:\r\n\r\nq)t:{til x}\r\n\r\nq)t[12]~(np[`:arange;*][12]`)\r\n1b\r\n\r\n\r\nThanks,\r\nDiane ",
        "**ghlian**: the codes are simply the testcases in embedPy/tests/syntax.t\r\n\r\nAll return 0b.\r\nq)t[12] is working fine.\r\n\r\n",
        "**ghlian**: however, in numpy 1.14.3 and q version 3.5 64bit, all the testcases return 1b."
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-ffebc21bc6a9",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/18",
    "title": "Segfault when passing corrupt unicode to a python function",
    "text": "# Segfault when passing corrupt unicode to a python function\n\n```\r\nKDB+ 3.5 2017.08.22 Copyright (C) 1993-2017 Kx Systems\r\nl64/ 16()core 122525MB ben labs1.firstderivatives.com 10.139.127.17 EXPIRE 2018.03.16 firstderivatives.com INTERNAL #49564\r\n\r\nq)\\l p.q\r\nq)p)def string_length(x): return len(x)\r\nq)stringLength: .p.callable .p.pyeval \"string_length\"\r\nq)stringLength \"Hello World\"\r\n11\r\nq)stringLength \"Hello\\351World\"\r\nSorry, this application or an associated library has encountered a fatal error and will exit.\r\nIf known, please email the steps to reproduce this error to tech@kx.com\r\nwith a copy of the kdb+ startup banner.\r\nThank you.\r\nq() [0x473a11]\r\n/usr/lib64/libpthread.so.0(+0xf100) [0x7f3fcee38100]\r\n/usr/local/lib/libpython3.5m.so.1.0(+0x15c0a1) [0x7f3fc81460a1]\r\n/usr/local/lib/libpython3.5m.so.1.0(PyEval_EvalCodeEx+0x48) [0x7f3fc81469d8]\r\n/usr/local/lib/libpython3.5m.so.1.0(+0x9e723) [0x7f3fc8088723]\r\n/usr/local/lib/libpython3.5m.so.1.0(PyObject_Call+0x6a) [0x7f3fc8057a2a]\r\n/IVY/instances/1264/delta-bin/software/KDBPlus_3_5_0/l64/./p.so(+0x2bd0) [0x7f3fc850fbd0]\r\nq() [0x472c59]\r\nq() [0x43c2e6]\r\nq() [0x43c2c5]\r\nq() [0x43e55a]\r\nq() [0x43c13e]\r\nq() [0x43c2c5]\r\nq() [0x43c715]\r\nq() [0x41d350]\r\nrlwrap: warning: q crashed, killed by SIGSEGV (core dumped).\r\nrlwrap itself has not crashed, but for transparency,\r\nit will now kill itself with the same signal\r\n\r\n\r\nwarnings can be silenced by the --no-warnings (-n) option\r\nSegmentation fault (core dumped)\r\n```\n\n## Top Comments\n\n**jhanna-kx**: Thanks, we'll look at a fix for this as soon as possible\n\n---\n\n**effbiae**: see commit #21   try .p.q2py\"Hello\\351World\"\n\n---\n\n**jhanna-kx**: #23 should fix this for .p.eval and .p.pyeval in the mean time until .p.q2py is applied on things passed to these functions\n\n---\n\n**jfakx**: so shall we change runs to accept last arg as foreign?  `eval:{runs[1;q2py x]}`\n\n---\n\n**jfakx**: or leave runs as it is and `runs[1;py2q q2py x]` to handle bad encodings\n\n---\n\n**jhanna-kx**: I think runs accepting a foreign would be fine, and q2py then throwing the python unicode error if everything goes through q2py",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 255,
    "metadata": {
      "issue_number": 18,
      "state": "closed",
      "labels": [],
      "comments_count": 6,
      "created_at": "2017-11-14T22:12:44Z",
      "updated_at": "2017-11-18T18:33:25Z",
      "closed_at": "2017-11-18T11:49:48Z",
      "author": "clovetea",
      "top_comments": [
        "**jhanna-kx**: Thanks, we'll look at a fix for this as soon as possible",
        "**effbiae**: see commit #21   try .p.q2py\"Hello\\351World\"",
        "**jhanna-kx**: #23 should fix this for .p.eval and .p.pyeval in the mean time until .p.q2py is applied on things passed to these functions",
        "**jfakx**: so shall we change runs to accept last arg as foreign?  `eval:{runs[1;q2py x]}`",
        "**jfakx**: or leave runs as it is and `runs[1;py2q q2py x]` to handle bad encodings"
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-8e4a2c6c7123",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/111",
    "title": "numpy array returns as foreign ",
    "text": "# numpy array returns as foreign \n\nHi.  I am unable to return a numpy array as anything but foreign.  Am I missing some syntax to force the conversion?  I've downloaded the latest embedPy files and running a recent version of kdb and python.\r\n\r\nuser@box ~ % q\r\nKDB+ 4.0 2021.07.12 Copyright (C) 1993-2021 Kx Systems\r\nm64/ 8(16)core 65536MB user box 127.0.0.1 EXPIRE 2022.10.04 user@google.com KOD #5005939\r\n\r\nq)\\l p.q\r\nq)sys:.p.import`sys;sys[`:version]`\r\n\"3.10.1 (v3.10.1:2cd268a3a9, Dec  6 2021, 14:28:59) [Clang 13.0.0 (clang-1300..\r\nq).p.set[`x;3];.p.get[`x]`\r\n3\r\nq)np:.p.import`numpy;arange:np`:arange;arange[12]`\r\nforeign\r\n\n\n## Top Comments\n\n**estradajke**: Just noticed the formatting was unclear.  \r\n\r\nq)\\l p.q\r\n\r\nq)sys:.p.importsys;sys[:version] \r\n\"3.10.1 (v3.10.1:2cd268a3a9, Dec 6 2021, 14:28:59) [Clang 13.0.0 (clang-1300.. \r\n\r\nq).p.set[x;3];.p.get[x]\r\n3\r\n\r\nq)np:.p.importnumpy;arange:np:arange;arange[12]`\r\nforeign\n\n---\n\n**cmccarthy1**: Hi,\r\n\r\nIt looks to be an issue with either the use of Python 3.10 or an update to numpy.\r\n\r\nCan you provide the version of `numpy` that you're using please and we'll aim to take a look.\r\n\r\nConor\n\n---\n\n**estradajke**: Thanks for the quick reply Conor.  It's 1.22.1.  I'm happy to move to another recent version if that helps.\r\n\r\nq)np:.p.import[`numpy];np[`:__version__]`\r\n\"1.22.1\"\n\n---\n\n**cmccarthy1**: I've confirmed it's the numpy version that is the issue, it looks like the underlying representation at the C level has changed somewhat which we'll need to investigate. If you downgrade numpy to `<1.22` the behaviour should resolve itself, at the present time there isn't an explicit workaround \n\n---\n\n**estradajke**: Rolled back to 1.21.\r\n\r\nq)arange[12]`\r\n0 1 2 3 4 5 6 7 8 9 10 11\r\n\r\nThanks!",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 241,
    "metadata": {
      "issue_number": 111,
      "state": "closed",
      "labels": [],
      "comments_count": 5,
      "created_at": "2022-01-24T19:18:57Z",
      "updated_at": "2024-06-14T09:57:53Z",
      "closed_at": "2024-06-14T09:57:53Z",
      "author": "estradajke",
      "top_comments": [
        "**estradajke**: Just noticed the formatting was unclear.  \r\n\r\nq)\\l p.q\r\n\r\nq)sys:.p.importsys;sys[:version] \r\n\"3.10.1 (v3.10.1:2cd268a3a9, Dec 6 2021, 14:28:59) [Clang 13.0.0 (clang-1300.. \r\n\r\nq).p.set[x;3];.p.get[x]\r\n3\r\n\r\nq)np:.p.importnumpy;arange:np:arange;arange[12]`\r\nforeign",
        "**cmccarthy1**: Hi,\r\n\r\nIt looks to be an issue with either the use of Python 3.10 or an update to numpy.\r\n\r\nCan you provide the version of `numpy` that you're using please and we'll aim to take a look.\r\n\r\nConor",
        "**estradajke**: Thanks for the quick reply Conor.  It's 1.22.1.  I'm happy to move to another recent version if that helps.\r\n\r\nq)np:.p.import[`numpy];np[`:__version__]`\r\n\"1.22.1\"",
        "**cmccarthy1**: I've confirmed it's the numpy version that is the issue, it looks like the underlying representation at the C level has changed somewhat which we'll need to investigate. If you downgrade numpy to `<1.22` the behaviour should resolve itself, at the present time there isn't an explicit workaround ",
        "**estradajke**: Rolled back to 1.21.\r\n\r\nq)arange[12]`\r\n0 1 2 3 4 5 6 7 8 9 10 11\r\n\r\nThanks!"
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-d880bb854681",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/48",
    "title": "Module 'sys' has no attribute 'argv'",
    "text": "# Module 'sys' has no attribute 'argv'\n\n```\r\nq)p)import sys;print(sys.argv)\r\n'e: module 'sys' has no attribute 'argv'\r\n  [0]  .../p.q:11: .p.e:{$[\"def\"~3#x;$[x[3]in\"<*>\";ei 3;eo];\"class\"~5#x;$[x[5]in\"*>\";ei 5;eo];eo]x}\r\n```\r\n\r\nIt would be nice to set sys.argv in p.q to a list derived from .z.X.\r\n\r\nSee https://docs.python.org/3.6/library/sys.html#sys.argv for details.  \n\n## Top Comments\n\n**jhanna-kx**: @abalkin would you suggest we just extend sys.argv with .z.X or include something to distinguish PyQ from embedPy?\n\n---\n\n**abalkin**: Good question.  In PyQ we populate sys.argv with .z.x with an additional trick to allow passing 1-letter options.  I don't think this logic is appropriate for embedPy which unlike pyq does not try to pretend being python.  In my own use cases, it did not really matter what sys.argv was set to as long as it was there.  IIRC, I had some module crash on import with an AttributeError.\r\n\r\nThis said, my suggestion is that sys.argv is set to [''] when embedPy is loaded interactively and to 1_.z.X when loaded from a script.\n\n---\n\n**jhanna-kx**: out of curiosity why shouldn't we just *always* set to `1_.z.X`\n\n---\n\n**abalkin**: According to the [documentation](https://docs.python.org/3/library/sys.html#sys.argv),\r\n\r\n> `argv[0]` is the script name (it is operating system dependent whether this is a full pathname or not). If the command was executed using the -c command line option to the interpreter, `argv[0]` is set to the string '-c'. **If no script name was passed to the Python interpreter, `argv[0]` is the empty string.**\r\n\r\nOf course, embedPy does not have to follow this convention exactly, but I think most python users expect `sys.argv[0]` to always be available.\r\n\r\nA simple solution would be to ignore .z.x or .z.X and always set `sys.argv=['']`.  This is what interactive users expect and script writers will have to arrange to set  `sys.argv` before importing modules that use it. \n\n---\n\n**jhanna-kx**: Should be fixed in [1.2.0](../releases/1.2.0) release, we set sys.argv to [''] if it is not already set in p.q so if someone sets it themselves after loading `p.q` then subsequent loads of p.q wiil not overwrite it.\r\n\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 331,
    "metadata": {
      "issue_number": 48,
      "state": "closed",
      "labels": [],
      "comments_count": 5,
      "created_at": "2018-05-31T19:34:34Z",
      "updated_at": "2018-07-17T09:03:31Z",
      "closed_at": "2018-07-17T09:03:31Z",
      "author": "abalkin",
      "top_comments": [
        "**jhanna-kx**: @abalkin would you suggest we just extend sys.argv with .z.X or include something to distinguish PyQ from embedPy?",
        "**abalkin**: Good question.  In PyQ we populate sys.argv with .z.x with an additional trick to allow passing 1-letter options.  I don't think this logic is appropriate for embedPy which unlike pyq does not try to pretend being python.  In my own use cases, it did not really matter what sys.argv was set to as long as it was there.  IIRC, I had some module crash on import with an AttributeError.\r\n\r\nThis said, my suggestion is that sys.argv is set to [''] when embedPy is loaded interactively and to 1_.z.X when loaded from a script.",
        "**jhanna-kx**: out of curiosity why shouldn't we just *always* set to `1_.z.X`",
        "**abalkin**: According to the [documentation](https://docs.python.org/3/library/sys.html#sys.argv),\r\n\r\n> `argv[0]` is the script name (it is operating system dependent whether this is a full pathname or not). If the command was executed using the -c command line option to the interpreter, `argv[0]` is set to the string '-c'. **If no script name was passed to the Python interpreter, `argv[0]` is the empty string.**\r\n\r\nOf course, embedPy does not have to follow this convention exactly, but I think most python users expect `sys.argv[0]` to always be available.\r\n\r\nA simple solution would be to ignore .z.x or .z.X and always set `sys.argv=['']`.  This is what interactive users expect and script writers will have to arrange to set  `sys.argv` before importing modules that use it. ",
        "**jhanna-kx**: Should be fixed in [1.2.0](../releases/1.2.0) release, we set sys.argv to [''] if it is not already set in p.q so if someone sets it themselves after loading `p.q` then subsequent loads of p.q wiil not overwrite it.\r\n\r\n"
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-5d6c39833a0b",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/19",
    "title": "The python error message isn't returned when running over IPC",
    "text": "# The python error message isn't returned when running over IPC\n\nIf the evaluation errors when running over IPC, the error message is always the same\r\n```\r\nq)server \".p.eval \\\"[1,2,3][10]\\\"\"\r\n'p.c:68 runs pyerr\r\n  [0]  server \".p.eval \\\"[1,2,3][10]\\\"\"\r\n       ^\r\nq)server \".p.eval \\\"1 + myUndefinedVar\\\"\"\r\n'p.c:68 runs pyerr\r\n  [0]  server \".p.eval \\\"1 + myUndefinedVar\\\"\"\r\n       ^\r\nq)server \".p.eval \\\"[1,2,3)\\\"\"\r\n'p.c:68 runs pyerr\r\n  [0]  server \".p.eval \\\"[1,2,3)\\\"\"\r\n```\r\nThese messages are printed in the server process, but aren't accessible from the client process\r\n```\r\nIndexError: list index out of range\r\nNameError: name 'myUndefinedVar' is not defined\r\nSyntaxError: unexpected EOF while parsing\r\n```\n\n## Top Comments\n\n**abalkin**: In PyQ we translate Python errors to `'ErrorType`:\r\n\r\n```q\r\nq)p)1+`\r\n'SyntaxError\r\nq)p)1+\"\"\r\n'TypeError\r\n```\r\n\r\nIt should not be hard to replicate the same logic in embedPy. \n\n---\n\n**clovetea**: It would be helpful if it could return the whole error message\r\n```NameError: name 'myUndefinedVar' is not defined```\r\ninstead of just\r\n```NameError```\n\n---\n\n**jfakx**: this does need refinement.  currently, a python error is printed and a signal raised.\r\nmaybe we could keep the error short, but provide a function to get extended error info `xrr`\n\n---\n\n**jhanna-kx**: Hi\r\nThis should be fixed now, since release [1.1](../releases/1.1) you'll get this:\r\n\r\n```q\r\nq)server\"p)1 + myUndefinedVar\"\r\n'e: name 'myUndefinedVar' is not defined\r\n  [0]  server\"p)1 + myUndefinedVar\"\r\n       ^\r\n```\r\n\n\n---\n\n**jhanna-kx**: closing, feel free to reopen if new behaviour doesn't work",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 227,
    "metadata": {
      "issue_number": 19,
      "state": "closed",
      "labels": [],
      "comments_count": 5,
      "created_at": "2017-11-15T19:05:59Z",
      "updated_at": "2018-07-17T09:04:36Z",
      "closed_at": "2018-07-17T09:04:36Z",
      "author": "clovetea",
      "top_comments": [
        "**abalkin**: In PyQ we translate Python errors to `'ErrorType`:\r\n\r\n```q\r\nq)p)1+`\r\n'SyntaxError\r\nq)p)1+\"\"\r\n'TypeError\r\n```\r\n\r\nIt should not be hard to replicate the same logic in embedPy. ",
        "**clovetea**: It would be helpful if it could return the whole error message\r\n```NameError: name 'myUndefinedVar' is not defined```\r\ninstead of just\r\n```NameError```",
        "**jfakx**: this does need refinement.  currently, a python error is printed and a signal raised.\r\nmaybe we could keep the error short, but provide a function to get extended error info `xrr`",
        "**jhanna-kx**: Hi\r\nThis should be fixed now, since release [1.1](../releases/1.1) you'll get this:\r\n\r\n```q\r\nq)server\"p)1 + myUndefinedVar\"\r\n'e: name 'myUndefinedVar' is not defined\r\n  [0]  server\"p)1 + myUndefinedVar\"\r\n       ^\r\n```\r\n",
        "**jhanna-kx**: closing, feel free to reopen if new behaviour doesn't work"
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-4df02c86526a",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/104",
    "title": "Release for support virtual environment",
    "text": "# Release for support virtual environment\n\nHi team,\r\n\r\nWe recently tried to use embedPy in projects. However, we need to use in Python virtual environment. Tested with latest release 1.3.8, not working.\r\n\r\nLooks like a recent commit in May 2021 added this support. Is there an official release then?\r\n\r\nThanks and regards,\r\nShawn\r\n\n\n## Top Comments\n\n**cmccarthy1**: Hi Shawn,\r\n\r\nThat has now been updated with release `1.4.0`. Note that this functionality is only provided for Linux and OSX installations at this time.\r\n\r\nPlease let us know if there are any issues and open this issue again or open a new issue outlining any problems you might find.\r\n\r\nRegards,\r\n\r\nConor\n\n---\n\n**hbkshawn**: is there an update for windows in the future?\n\n---\n\n**cmccarthy1**: I'm unsure of that at present, Windows venvs work quiet differently to Linux/OSX and work that we've done to this point hasn't provided with us a path that will allow us to support each of these so we don't have a timeline on when/if we can support them.\n\n---\n\n**hbkshawn**: thanks for your explanation. looking forward to this feature.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 181,
    "metadata": {
      "issue_number": 104,
      "state": "closed",
      "labels": [],
      "comments_count": 4,
      "created_at": "2021-07-20T06:14:12Z",
      "updated_at": "2021-07-20T08:20:58Z",
      "closed_at": "2021-07-20T07:05:39Z",
      "author": "hbkshawn",
      "top_comments": [
        "**cmccarthy1**: Hi Shawn,\r\n\r\nThat has now been updated with release `1.4.0`. Note that this functionality is only provided for Linux and OSX installations at this time.\r\n\r\nPlease let us know if there are any issues and open this issue again or open a new issue outlining any problems you might find.\r\n\r\nRegards,\r\n\r\nConor",
        "**hbkshawn**: is there an update for windows in the future?",
        "**cmccarthy1**: I'm unsure of that at present, Windows venvs work quiet differently to Linux/OSX and work that we've done to this point hasn't provided with us a path that will allow us to support each of these so we don't have a timeline on when/if we can support them.",
        "**hbkshawn**: thanks for your explanation. looking forward to this feature."
      ],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-96deed58576e",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/85",
    "title": "tensorflow.t ",
    "text": "# tensorflow.t \n\nI am getting the below error\r\n\r\nERROR:\r\n test:\r\n  1 3~raze\"j\"$10*fit[x;y]\r\n message:\r\n  call: module 'tensorflow' has no attribute 'random_uniform'\r\n    [11] 1 3~raze\"j\"$10*fit[x;y]\r\n                        ^\r\n file:\r\n  tests/tensorflow.t\r\n\r\nfailed:0, errored:4, skipped:16, total:273",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 30,
    "metadata": {
      "issue_number": 85,
      "state": "closed",
      "labels": [],
      "comments_count": 4,
      "created_at": "2020-05-21T16:47:15Z",
      "updated_at": "2020-05-22T11:26:43Z",
      "closed_at": "2020-05-22T10:50:41Z",
      "author": "swat-agarwal",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-ff9b37aec413",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/79",
    "title": "No conversion for guid from q to Python",
    "text": "# No conversion for guid from q to Python\n\nThere appears to be no conversion from a q guid to Python when using .p.set. It would be useful if guids were received as strings so that Python libraries could still be used with tables containing guids, and without first cleansing q tables from having guids.\r\n\r\n```\r\n.p.set[`foo; 0ng]\r\n'set: bad argument type for built-in operation\r\n  [1]  /Users/tim/q/p.q:44: {[f;x;y]f[x]unwrap y;}\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 70,
    "metadata": {
      "issue_number": 79,
      "state": "closed",
      "labels": [],
      "comments_count": 4,
      "created_at": "2019-11-27T14:15:57Z",
      "updated_at": "2019-12-02T12:14:58Z",
      "closed_at": "2019-12-02T12:14:58Z",
      "author": "igorii",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-fa1091b058d2",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/61",
    "title": "access python generator in q",
    "text": "# access python generator in q\n\nHaving issues iterating over a python generator.\r\n\r\nPython function is mapped to a q, function returns a python generator \"<generator object...>\", and this object is inaccessible in native q;\r\n```\r\nq)qfunc[`:returnPyGenerator;<];\r\nq)qvar:qfunc[pargs];\r\nq)qvar\r\nforeign\r\n```\r\nqvar` errors with rank\r\nno success in wrapping with .p.wrap\r\nno success trying with .p.closure\r\n\r\nI see documentation on creating a generator in q, and then passing it to python, and iterating in the python space, but is there anyway to do the same natively\r\n\r\nThanks\r\n\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 87,
    "metadata": {
      "issue_number": 61,
      "state": "closed",
      "labels": [],
      "comments_count": 4,
      "created_at": "2018-09-25T05:43:39Z",
      "updated_at": "2018-12-04T16:36:07Z",
      "closed_at": "2018-12-04T16:36:07Z",
      "author": "michaelsimonelli",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-bf83e1cea5ec",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/39",
    "title": "Install fails on redhat 2.6 x86_64",
    "text": "# Install fails on redhat 2.6 x86_64\n\nHi,\r\n\r\nI followed the installation steps [here](https://github.com/kxsystems/embedpy) (using embedPy release 1.1 for linux) but when I load `p.q` I get an error\r\n\r\n```\r\n{\"'\",x,\"'.join([__import__('sysconfig').get_config_var(v)for v in\",ssr[.j.j y;\"\\\"\";\"'\"],\"])\"}\r\n'.j.j\r\n```\r\nI am using anaconda 4.5.0, have copied p.q and p.k into $QHOME/ and p.so into $QHOME/l64/ and set the environment variable `LD_LIBRARY_PATH` (to `/home/hoeflm/anaconda3/lib`)\r\n\r\n\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 60,
    "metadata": {
      "issue_number": 39,
      "state": "closed",
      "labels": [],
      "comments_count": 4,
      "created_at": "2018-04-20T11:00:16Z",
      "updated_at": "2018-06-09T20:06:22Z",
      "closed_at": "2018-06-09T20:06:22Z",
      "author": "MaxHoefl",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-ded1bfa6b194",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/24",
    "title": "x=ja(&y,&z)",
    "text": "# x=ja(&y,&z)\n\nin PR \"Use ja to null-terminate code strings. #11\"\r\n```\r\n- ..x=K(\",[;10h$0]\",r1(x));..\r\n+..C z=0;r1(y);x=ja(&y,&z);x==y?--xn:r0(y);..\r\n```\r\nreviewing api docs at http://code.kx.com/q/interfaces/capiref/#joins, `x==y` is always true after `x=ja(&y,&z)`\r\n\r\na solution\r\n``` +Z K2(runs){P(xt!=-KJ||y->t!=KC,E(type))r1(y);ja(&y,\"\"),--y->n;PyErr_Clear();O o=PyRun_String(xG,xj?Py_eval_input:Py_file_input,d,d);r0(y);R ko(o)?:PE;} ```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 36,
    "metadata": {
      "issue_number": 24,
      "state": "closed",
      "labels": [],
      "comments_count": 4,
      "created_at": "2017-11-22T01:44:57Z",
      "updated_at": "2018-10-24T16:35:04Z",
      "closed_at": "2018-10-24T16:35:04Z",
      "author": "effbiae",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-746a954779e5",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/13",
    "title": "Configuration fails on macOS",
    "text": "# Configuration fails on macOS\n\nI am using a universal Python build from\r\n\r\n```bash\r\n$ brew install sashkab/python/python36 --universal\r\n```\r\n\r\nand configuration fails with the following diagnostic\r\n \r\n```bash\r\n$ q configure.q\r\nKDB+ 3.4 2016.06.14 Copyright (C) 1993-2016 Kx Systems\r\nm32/ 8()core 16384MB a a-mbp.local 172.20.10.2 NONEXPIRE\r\n\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nTypeError: sequence item 0: expected str instance, int found\r\n{system string[$[count w;pp first w;e`python]],\" -c \\\"\",x,\"\\\"\"}\r\n'os\r\n@\r\n.,[\"\\\\\"]\r\n\"python3 -c \\\"import sysconfig as c,os,sys;v=c.get_config_var;first=lambda x:..\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 84,
    "metadata": {
      "issue_number": 13,
      "state": "closed",
      "labels": [],
      "comments_count": 4,
      "created_at": "2017-11-12T17:52:50Z",
      "updated_at": "2018-06-09T20:07:53Z",
      "closed_at": "2018-06-09T20:07:53Z",
      "author": "abalkin",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-0c2cddc06236",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/106",
    "title": "Python 3.9 support",
    "text": "# Python 3.9 support\n\nCurrently embedPy does not operate within Python 3.9 anaconda build environments\r\n\r\n```\r\nq p.q\r\nKDB+ 4.0 2020.05.04 Copyright (C) 1993-2020 Kx Systems\r\n\r\n'libpython\r\n  [2]  /usr/local/anaconda3/envs/qenv/q/p.q:12: \r\n `L`M`H`P`B set'@[system\"python3 \",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];.P.env:not H~P;\r\n .p:(`:./p 2:(`init;3))[L;H;B]]\r\n    ^\r\nq.p))\\\r\n```\r\n\r\nAs indicated here for Python 3.8 https://docs.python.org/3/whatsnew/3.8.html#debug-build-uses-the-same-abi-as-release-build the issue is likely due to libpython not being shipped with conda.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 60,
    "metadata": {
      "issue_number": 106,
      "state": "closed",
      "labels": [],
      "comments_count": 3,
      "created_at": "2021-09-03T10:02:05Z",
      "updated_at": "2024-06-14T09:58:09Z",
      "closed_at": "2024-06-14T09:58:09Z",
      "author": "cmccarthy1",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-bdde4f17145a",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/54",
    "title": "support RHEL6 ?",
    "text": "# support RHEL6 ?\n\nRHEL6 is still widely used in the banking world, would be nice if you had pre-built binaries for that version too.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 25,
    "metadata": {
      "issue_number": 54,
      "state": "closed",
      "labels": [],
      "comments_count": 3,
      "created_at": "2018-06-26T23:26:58Z",
      "updated_at": "2018-11-21T01:15:21Z",
      "closed_at": "2018-11-21T01:15:21Z",
      "author": "juanez",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-fd8b8dbf5de4",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/45",
    "title": "Can't install on macOS",
    "text": "# Can't install on macOS\n\nI have followed the instructions on README but can't manage to install `embedPy`. I keep getting the following error:\r\n\r\n```\r\n'dlsym(0x7fad1a602570, init): symbol not found\r\n  [4]  /Users/path/to/my/project/embedPy/p.q:6:\r\n `L`M`H set'@[system\"python3 \",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];\r\n .p:(`:./p 2:(`init;2))[L;H]]\r\n           ^\r\n  [0]  (<load>)\r\n```\r\n\r\nI have tried both with in my Miniconda environment and a using virtualenv (based on the `sashkab/python/python36` brew package). I have also tried setting `DYLD_LIBRARY_PATH` as mentioned in the README and not setting it at all. I keep getting the same error every time (and since I am no Q expert, I don't really understand what's going on).\r\n\r\nI am using the on-demand version of Q (64-bit).",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 111,
    "metadata": {
      "issue_number": 45,
      "state": "closed",
      "labels": [],
      "comments_count": 3,
      "created_at": "2018-05-22T07:41:16Z",
      "updated_at": "2018-06-13T09:55:30Z",
      "closed_at": "2018-06-13T09:55:30Z",
      "author": "gusutabopb",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-b1fd955781af",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/44",
    "title": "Lists of objects aren't being unwrapped recursively?",
    "text": "# Lists of objects aren't being unwrapped recursively?\n\nI was playing with some advanced IPython widget usage that requires passing in lists whose first element is a Python object. Unfortunately, while bare Python objects are automatically unwrapped on the way back to Python, that's not true of Python objects in a _list_. I did discover that you can force them to be unwrapped, but it seems better if the embedPy functionality would do this recursively on lists and other composite objects.\r\n```\r\np)class MyObject:\r\n    pass\r\np)def bar():\r\n    return MyObject()\r\np)def foo(x):\r\n    if isinstance(x, list):\r\n        print('[' + (', '.join(repr(y) for y in x)) + ']')\r\n    else:\r\n        print(repr(x))\r\nfoo:.p.get[`foo]\r\nbar:.p.get[`bar]\r\nfoo(bar[])\r\nfoo((bar[];1))\r\nfoo((bar[]`.;1))\r\nfoo(\"a\";1)\r\n```\r\nOutput:\r\n```\r\n<__main__.MyObject object at 0x1196b2f98>\r\n[<built-in method q) of PyCapsule object at 0x1155632d0>, 1]\r\n[<__main__.MyObject object at 0x1196b2f98>, 1]\r\n['a', 1]\r\n```\r\nWhat seems sensible is that the to have to use that back-tick notation, so that the second line behaves the way the third one does.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 161,
    "metadata": {
      "issue_number": 44,
      "state": "closed",
      "labels": [],
      "comments_count": 3,
      "created_at": "2018-05-16T21:11:11Z",
      "updated_at": "2018-07-17T09:00:03Z",
      "closed_at": "2018-07-17T09:00:03Z",
      "author": "mcg1969",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-2d535107b926",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/14",
    "title": "Add support for asyncio",
    "text": "# Add support for asyncio\n\nIt should be possible to implement an [asyncio](https://docs.python.org/3/library/asyncio-eventloops.html#event-loops) event loop based on kdb+ [sd1/sd0](http://code.kx.com/q/interfaces/capiref/#sd0-remove-callback).  Once such an event loop is available, it should be straightforward to implement asynchronous calls from q to Python. ",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 38,
    "metadata": {
      "issue_number": 14,
      "state": "closed",
      "labels": [],
      "comments_count": 3,
      "created_at": "2017-11-12T23:59:57Z",
      "updated_at": "2024-06-14T09:58:26Z",
      "closed_at": "2024-06-14T09:58:26Z",
      "author": "abalkin",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-22d7ef28a03c",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/10",
    "title": "A memory leak in .p.eval",
    "text": "# A memory leak in .p.eval\n\nThe following q session log suggests that ` .p.eval\"42\"` leaks 16 bytes per invocation.\r\n\r\n```\r\nq)\\l p.q\r\nq)first system\"w\"\r\n169952\r\nq)\\ts:100000 .p.eval\"42\"\r\n1524 1600896\r\nq)first system\"w\"\r\n1769952\r\nq)1769952-169952\r\n1600000\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 36,
    "metadata": {
      "issue_number": 10,
      "state": "closed",
      "labels": [],
      "comments_count": 3,
      "created_at": "2017-11-11T21:58:22Z",
      "updated_at": "2017-11-13T11:47:40Z",
      "closed_at": "2017-11-13T11:47:40Z",
      "author": "abalkin",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-79e9a1815220",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/8",
    "title": ".p.eval errors on expressions containing assignments or function definitions",
    "text": "# .p.eval errors on expressions containing assignments or function definitions\n\n```\r\nq)p)x=2\r\n```\r\nwill work as expected, but run\r\n```\r\nq).p.eval \"x=2\"\r\n```\r\nand you'll get the error\r\n```\r\n  File \"<string>\", line 1\r\n    x=2\r\n     ^\r\nSyntaxError: invalid syntax\r\n'p.c:68 runs pyerr\r\n  [0]  .p.eval \"x=2\"\r\n       ^\r\n```\r\nThe same error is thrown when running an expression that defines a function\r\n```\r\nq).p.eval \"def square(x): return x * x\"\r\n  File \"<string>\", line 1\r\n    def square(x): return x * x\r\n      ^\r\nSyntaxError: invalid syntax\r\n'p.c:68 runs pyerr\r\n  [0]  .p.eval \"def square(x): return x * x\"\r\n       ^\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 94,
    "metadata": {
      "issue_number": 8,
      "state": "closed",
      "labels": [],
      "comments_count": 3,
      "created_at": "2017-11-09T16:33:28Z",
      "updated_at": "2017-11-13T18:35:47Z",
      "closed_at": "2017-11-13T18:35:47Z",
      "author": "clovetea",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-ad4317df7b3d",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/107",
    "title": "Cannot pass the test.q when installing from Win release",
    "text": "# Cannot pass the test.q when installing from Win release\n\nI'm installing embedPy from a windows release.\r\nAccording to the instructions, I need to run the tests in the unzipped directory. However I cannot pass the test with the following error log.\r\n\r\n...\\embedPy-1.4.1> q test.q\r\nKDB+ 4.0 2021.07.12 Copyright (C) 1993-2021 Kx Systems\r\nw64/ 16(16)core 32620MB ...\r\n\r\n'The specified module could not be found.\r\n  [5]  C:\\Users\\ma-pi\\Downloads\\embedPy-1.4.1\\embedPy-1.4.1\\p.q:12:\r\n `L`M`H`P`B set'@[system\"python3 \",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];.P.env:not H~P;\r\n .p:(`:./p 2:(`init;3))[L;H;B]]\r\n           ^\r\nq.p))\r\n\r\nMy python version 3.8.8, KDB version 4.0, OS Win10.\r\nIt seems I missed some packages. Could anyone tell me what package or module I missed?\r\nThank you.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 104,
    "metadata": {
      "issue_number": 107,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2021-09-12T05:19:55Z",
      "updated_at": "2021-09-14T03:36:27Z",
      "closed_at": "2021-09-14T03:36:26Z",
      "author": "amRsching",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-81f5b576d8d3",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/92",
    "title": "embedPy test gives \"The specified module could not be found\"",
    "text": "# embedPy test gives \"The specified module could not be found\"\n\nTrying to follow the step in the installation guide for Windows. Extracted the embedPy zip and ran\r\n`pip install -r tests/requirements.txt`\r\n\r\nthen got an error when running `q test.q`\r\n\r\n```\r\nC:\\Users\\xxxx\\Downloads\\embedPy_windows-1.3.6>q test.q\r\nKDB+ 3.6 2019.09.19 Copyright (C) 1993-2019 Kx Systems\r\nw64/ 8(16)core 16275MB xxxx xxxx 192.168.0.14 EXPIRE 2021.03.16 xxxx@gmail.com KOD #4169673\r\n\r\n'The specified module could not be found.\r\n  [4]  C:\\Users\\xxxx\\Downloads\\embedPy_windows-1.3.6\\p.q:12:\r\n `L`M`H set'@[system\"python3 \",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];\r\n .p:(`:./p 2:(`init;2))[L;H]]\r\n           ^\r\n  [0]  (<load>)\r\n\r\n  )\r\n  )key each hsym each`$`L`M#.p\r\n'each\r\n  [5]  key each hsym each`$`L`M#.p\r\n                     ^\r\n  )\r\n  )  )'2020.07.26T09:57:04.146 .Q.dbg\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 99,
    "metadata": {
      "issue_number": 92,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2020-07-26T10:17:47Z",
      "updated_at": "2020-09-16T09:05:52Z",
      "closed_at": "2020-09-16T09:05:51Z",
      "author": "kamchan0",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-55d2f5a42cb0",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/89",
    "title": "Missing p.so",
    "text": "# Missing p.so\n\nHi - this repo appears to be missing the q.so file formally in a folder l64.\r\nThe installation instructions still appear to reference the file. \r\nAlso the instructions reference running q test.q before installing embedPy. \r\nRegards,\r\nSimon\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 40,
    "metadata": {
      "issue_number": 89,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2020-06-26T09:39:06Z",
      "updated_at": "2020-07-16T23:38:43Z",
      "closed_at": "2020-07-16T23:38:43Z",
      "author": "simonsjw",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-95b9ee94493a",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/83",
    "title": "windows error Specified Module could not be found",
    "text": "# windows error Specified Module could not be found\n\n\r\n'The specified module could not be found.\r\n  [4]  C:\\q\\p.q:9:\r\n `L`M`H`B set'@[system\"python\",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];C:H~B;\r\n .p:(`:./p 2:(`init;3))[L;H;C]]\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 25,
    "metadata": {
      "issue_number": 83,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2020-03-04T01:05:13Z",
      "updated_at": "2020-05-18T18:22:05Z",
      "closed_at": "2020-05-18T18:22:05Z",
      "author": "swat-agarwal",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-bddce4c95a01",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/67",
    "title": "Unable to parse multiline triple-quoted strings",
    "text": "# Unable to parse multiline triple-quoted strings\n\nInput file `test.p`:\r\n```\r\ns = '''\r\n    multiline triple-quoted string\r\n'''\r\n```\r\n\r\nOutput from running `q test.p`:\r\n```\r\n'e: EOF while scanning triple-quoted string literal (, line 2)                                                     \r\n  [2]  /IVY/instances/1268/delta-bin/software/KDBPlus_3_6_0/p.q:13: .p.e:{$[\"def\"~3#x;$[x[3]in\"<*>\";ei 3;eo];\"class\"\r\n~5#x;$[x[5]in\"*>\";ei 5;eo];eo]x}\r\n                                                                          ^                                        \r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 43,
    "metadata": {
      "issue_number": 67,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2018-12-04T19:58:23Z",
      "updated_at": "2019-08-31T19:40:40Z",
      "closed_at": "2019-08-31T19:40:40Z",
      "author": "WillDaSilva",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-fcd67c8e7ef6",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/65",
    "title": "TypeError: __init__() missing 2 required positional arguments",
    "text": "# TypeError: __init__() missing 2 required positional arguments\n\nHi, @sv @abalkin @sashkab @simongarland @jimdigriz \r\n\r\nI met this error when run.\r\n\r\nkerb:stitcher mun$ \r\nkerb:stitcher mun$ python3 alignImagesRansac.py ./images ./images/3.png ./images/\r\nTraceback (most recent call last):\r\n  File \"alignImagesRansac.py\", line 360, in <module>\r\n    AlignImagesRansac(sys.argv[1:])\r\nTypeError: __init__() missing 2 required positional arguments: 'key_frame' and 'output_dir'\r\nkerb:stitcher mun$ \r\n\r\nWhat's wrong with me?\r\n\r\nfrom @bemoregt. ",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 59,
    "metadata": {
      "issue_number": 65,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2018-11-22T04:52:26Z",
      "updated_at": "2018-12-04T16:27:08Z",
      "closed_at": "2018-12-04T16:27:08Z",
      "author": "bemoregt",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-3187f0862f92",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/55",
    "title": "Library error when importing `scipy.optimize` in embedpy",
    "text": "# Library error when importing `scipy.optimize` in embedpy\n\ncc: @ilanschnell\r\n\r\nI'm working on the embedPy recipe right now, and it was my desire to have conda build run the tests. I've run into the following problem. I have an environment with the current build of kdb and embedpy. When running the `curve_fit` test I'm getting a library loading error; see below. I'm continuing to investigate, but if the embedPy authors have seen this before, let me know.\r\n\r\nFrom the command line:\r\n```\r\nconda create -n kx -c kx kdb embedpy scipy\r\nconda activate kx\r\nq\r\n```\r\nFrom the q prompt:\r\n```\r\n\\l p.q\r\ncf:.p.import[`scipy.optimize;`:curve_fit;<]\r\n```\r\nThe error:\r\n```\r\n'import: dlopen(/Users/mgrant/miniconda3/envs/kx/lib/python3.6/site-packages/scipy/optimize/minpack2.cpython-36m-darwin.so, 2): Symbol not found: _main\r\n  Referenced from: /Users/mgrant/miniconda3/envs/kx/lib/python3.6/site-packages/scipy/optimize/minpack2.cpython-36m-darwin.so\r\n  Expected in: flat namespace\r\n in /Users/mgrant/miniconda3/envs/kx/lib/python3.6/site-packages/scipy/optimize/minpack2.cpython-36m-darwin.so\r\n  [1]  /Users/mgrant/miniconda3/envs/kx/q/p.q:36: .p.wfunc:{[f;x]r:wrap f x 0;$[count x:1_x;.[;x];]r}\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 132,
    "metadata": {
      "issue_number": 55,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2018-07-17T14:09:20Z",
      "updated_at": "2018-08-22T10:02:23Z",
      "closed_at": "2018-08-22T10:02:23Z",
      "author": "mcg1969",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-e936f2ceb949",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/42",
    "title": "Why need setting `LD_LIBRARY_PATH` with conda python?",
    "text": "# Why need setting `LD_LIBRARY_PATH` with conda python?\n\nTo have _embedPy_ work with conda python on Linux, we have to set `LD_LIBRARY_PATH`.\r\nThis looks like a temporary work around and may cause several issue when we using other softwares.\r\n\r\nWhy this setting is needed? Which part of _embedPy_ request it?\r\n\r\nI'm asking this question because I want to help solve it. _embedPy_ may not be good enough to be used in production with this issue.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 75,
    "metadata": {
      "issue_number": 42,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2018-05-08T17:20:04Z",
      "updated_at": "2018-06-13T09:54:41Z",
      "closed_at": "2018-06-13T09:54:41Z",
      "author": "lwshang",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-c0da92959307",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/35",
    "title": "Configure fails on macOS",
    "text": "# Configure fails on macOS\n\n```\r\n$ ./configure\r\nKDB+ 3.5 2017.06.19 Copyright (C) 1993-2017 Kx Systems\r\nm32/ 20()core 65536MB a a-imacpro.ny0.nln 10.166.1.30 NONEXPIRE\r\n\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nTypeError: sequence item 0: expected str instance, int found\r\n'os\r\n  [3]  /Users/a/Work/KxSystems/embedPy/configure.q:4: py:{system string[$[count w;pp first w;e`python]],\" -c \\\"\",x,\"\\\"\"}\r\n                                                          ^\r\nq))\r\n```\r\n\r\nI am using Python 3.6:\r\n\r\n```\r\n$ python -V\r\nPython 3.6.4\r\n```\r\n\r\nHere is so more information.  The failing python command is\r\n\r\n```\r\nq))-1 string[$[count w;pp first w;e`python]],\" -c \\\"\",x,\"\\\"\"\r\npython3 -c \"import sysconfig as c,os,sys;v=c.get_config_var;first=lambda x:len(x) and x[0];d=v('LDLIBRARY');P,p=sys.exec_prefix,sys.prefix;w=lambda x:first([a[0] for a in os.walk(x) if d in a[2]]);L=w(P+'/lib')or w(v('LIBDIR'));I=c.get_path('include');print('\\n'.join([L,d,P,p,I]))\"\r\n```\r\n\r\nRunning it with inspect mode in python gives\r\n\r\n```\r\n$ python3 -i -c \"import sysconfig as c,os,sys;v=c.get_config_var;first=lambda x:len(x) and x[0];d=v('LDLIBRARY');P,p=sys.exec_prefix,sys.prefix;w=lambda x:first([a[0] for a in os.walk(x) if d in a[2]]);L=w(P+'/lib')or w(v('LIBDIR'));I=c.get_path('include');print('\\n'.join([L,d,P,p,I]))\"\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nTypeError: sequence item 0: expected str instance, int found\r\n>>> import pdb; pdb.pm()\r\n[0] > <string>(1)<module>()\r\n(Pdb++) L\r\n0\r\n```\r\n\r\nSo the culprit is the \"walk\" function:\r\n\r\n```\r\n(Pdb++) P\r\n'/Users/a/.virtualenvs/3/bin/..'\r\n(Pdb++) v('LIBDIR')\r\n'/usr/local/opt/python36/Frameworks/Python.framework/Versions/3.6/lib'\r\n(Pdb++) w(P+'/lib')\r\n0\r\n(Pdb++) w(v('LIBDIR'))\r\n0\r\n```\r\n\r\nPython dynamic library can be found in the following directory on my system:\r\n\r\n```\r\n$ ls /usr/local/opt/python36/Frameworks/Python.framework/Versions/3.6/lib/python3.6/config-3.6m-darwin/libpython*\r\n/usr/local/opt/python36/Frameworks/Python.framework/Versions/3.6/lib/python3.6/config-3.6m-darwin/libpython3.6.a\r\n/usr/local/opt/python36/Frameworks/Python.framework/Versions/3.6/lib/python3.6/config-3.6m-darwin/libpython3.6.dylib\r\n/usr/local/opt/python36/Frameworks/Python.framework/Versions/3.6/lib/python3.6/config-3.6m-darwin/libpython3.6m.a\r\n/usr/local/opt/python36/Frameworks/Python.framework/Versions/3.6/lib/python3.6/config-3.6m-darwin/libpython3.6m.dylib\r\n```\r\n\r\nThis directory is correctly reported by `python-config`:\r\n\r\n```\r\n$ python-config --ldflags\r\n-L/usr/local/opt/python36/Frameworks/Python.framework/Versions/3.6/lib/python3.6/config-3.6m-darwin -lpython3.6m -ldl -framework CoreFoundation\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 227,
    "metadata": {
      "issue_number": 35,
      "state": "closed",
      "labels": [],
      "comments_count": 2,
      "created_at": "2018-02-16T21:03:50Z",
      "updated_at": "2018-06-09T20:08:42Z",
      "closed_at": "2018-06-09T20:08:42Z",
      "author": "abalkin",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-45e2e9c3c7ce",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/94",
    "title": "Python 3.8 support",
    "text": "# Python 3.8 support\n\n* With the release of Python 3.8 support for the mechanism by which embedPy collects the python shared object `libpython.so/libpython.dll` appears to have been deprecated, as outlined [here](https://docs.python.org/3/whatsnew/3.8.html#debug-build-uses-the-same-abi-as-release-build).\r\n\r\n* This limitation was first noticed with the attempted release of python 3.8 support for embedPy on anaconda #93 which resulted in a failure to adequately provide `libpython.dll` on windows release.\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 63,
    "metadata": {
      "issue_number": 94,
      "state": "closed",
      "labels": [],
      "comments_count": 1,
      "created_at": "2020-08-03T09:13:41Z",
      "updated_at": "2020-08-04T21:01:17Z",
      "closed_at": "2020-08-04T21:01:17Z",
      "author": "cmccarthy1",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-9cf82223a4d3",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/76",
    "title": "tests fail on windows - reopening the closed issue",
    "text": "# tests fail on windows - reopening the closed issue\n\nI seem to be running into an issue that was reported here in July 2018 and closed - but am still getting the same symptoms working with the latest embedPy (release 1.3.2).\r\n\r\nBelow is the relevant excerpt:\r\n\r\n(base) D:\\temp\\embedPy>conda install --file tests/requirements.txt\r\nCollecting package metadata: done\r\nSolving environment: done\r\n\r\nAll requested packages already installed.\r\n\r\n\r\n(base) D:\\temp\\embedPy>q test.q\r\nKDB+ 3.6 2019.04.02 Copyright (C) 1993-2019 Kx Systems\r\nw64/ 4(16)core 8109MB Tahsin Alam hunter 10.0.75.1 EXPIRE 2020.04.13 alam.tahsin@gmail.com KOD #4164452\r\n\r\nWARN: can't import: resource, remainder of tests/memory.t skipped, error was:\r\n\r\n        import: No module named 'resource'\r\n\r\nWARNING:tensorflow:From d:\\bin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\n2019-04-28 17:38:26.237259: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX AVX2\r\n2019-04-28 17:38:26.248395: I tensorflow/core/common_runtime/process_util.cc:71] Creating new thread pool with default inter op setting: 4. Tune using inter_op_parallelism_threads for best performance.\r\nThese modules required for tests couldn't be imported:\r\n        resource\r\n\r\ntry running\r\n        pip install -r tests/requirements.txt\r\n\r\nor with conda\r\n        conda install --file tests/requirements.txt\r\n\r\nfailed:0, errored:0, skipped:16, total:273\r\n\r\n(base) D:\\temp\\embedPy>q\r\nKDB+ 3.6 2019.04.02 Copyright (C) 1993-2019 Kx Systems\r\nw64/ 4(16)core 8109MB Tahsin Alam hunter 10.0.75.1 EXPIRE 2020.04.13 alam.tahsin@gmail.com KOD #4164452\r\n\r\nq)\\\\\r\n\r\n(base) D:\\temp\\embedPy>python --version\r\nPython 3.6.8 :: Anaconda custom (64-bit)",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 222,
    "metadata": {
      "issue_number": 76,
      "state": "closed",
      "labels": [],
      "comments_count": 1,
      "created_at": "2019-04-28T21:44:48Z",
      "updated_at": "2019-04-29T17:37:34Z",
      "closed_at": "2019-04-29T17:37:34Z",
      "author": "creditquant",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-591177569cc7",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/69",
    "title": "p) isn't showing the results for expressions",
    "text": "# p) isn't showing the results for expressions\n\nIf you run an expression in Python, it prints the result\r\n```\r\n>>> 1+2\r\n3\r\n```\r\nbut in embedpy, the result of an expression won't be printed unless you use print\r\n```\r\nq)p)1+2\r\nq)p)print(1+2)\r\n3\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 44,
    "metadata": {
      "issue_number": 69,
      "state": "closed",
      "labels": [],
      "comments_count": 1,
      "created_at": "2019-02-06T21:53:10Z",
      "updated_at": "2019-02-07T01:41:36Z",
      "closed_at": "2019-02-07T01:41:36Z",
      "author": "clovetea",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-15a9ebe835aa",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/51",
    "title": "working with not anaconda, pure python+pip env",
    "text": "# working with not anaconda, pure python+pip env\n\ncould you tell me work with pure python and pip environment",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 19,
    "metadata": {
      "issue_number": 51,
      "state": "closed",
      "labels": [],
      "comments_count": 1,
      "created_at": "2018-06-12T00:24:46Z",
      "updated_at": "2018-06-27T08:01:23Z",
      "closed_at": "2018-06-27T08:01:23Z",
      "author": "fkgre",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-428d3374c42f",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/49",
    "title": "datetime convertion for matplotlib",
    "text": "# datetime convertion for matplotlib\n\nI found that it isn't possible to plot the date axis using embedPy, because it is not sending the datetime as python datetime object when embedPy convert the Q object to python object.  You can run this under JupyterQ:\r\n\r\n```\r\n\\l p.q\r\n\\d .matplotlib\r\nisroutine:.p.import[`inspect;`:isroutine];\r\ngetmembers:.p.import[`inspect;`:getmembers];\r\nwrapm:{[x]\r\n names:getmembers[x;isroutine]`;\r\n res:``_pyobj!((::);x);\r\n res,:(`$names[;0])!{.p.wrap x 1}each names;\r\n res}\r\npyplot:{wrapm .p.import`matplotlib.pyplot}\r\n\r\nplt:.matplotlib.pyplot[];\r\nx:.z.T+til 10;\r\ny:til 10;\r\nplt.plot[x;y];\r\n\r\nplt.show[];\r\n```\r\n\r\nThe x axis is expected to be a time, but it is render as a number",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 85,
    "metadata": {
      "issue_number": 49,
      "state": "closed",
      "labels": [],
      "comments_count": 1,
      "created_at": "2018-06-01T21:07:32Z",
      "updated_at": "2018-06-27T08:01:34Z",
      "closed_at": "2018-06-27T08:01:34Z",
      "author": "sitsang",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-835dcacabd92",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/32",
    "title": "Error running expressions containing strings with invalid UTF-8",
    "text": "# Error running expressions containing strings with invalid UTF-8\n\nThis works in python\r\n```\r\n>>> eval(\"len(\\\"\\277\\\")\")\r\n1\r\n```\r\nbut from q I get this\r\n```\r\nq).p.eval(\"len(\\\"\\277\\\")\")\r\n  File \"<string>\", line 1\r\nSyntaxError: (unicode error) 'utf-8' codec can't decode byte 0xbf in position 0: invalid start byte\r\n'p.c:71 runs pyerr\r\n  [1]  /home/tepu/embedPy-master/p.q:21: .p.wfunc:{[f;x]r:wrap f x 0;$[count x:1_x;.[;x];]r}\r\n```\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 56,
    "metadata": {
      "issue_number": 32,
      "state": "closed",
      "labels": [],
      "comments_count": 1,
      "created_at": "2017-12-15T20:53:58Z",
      "updated_at": "2018-02-01T10:49:16Z",
      "closed_at": "2018-02-01T10:49:16Z",
      "author": "clovetea",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-d471857aa69b",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/121",
    "title": "table auto-flipping, undocumented 'feature' or bug?",
    "text": "# table auto-flipping, undocumented 'feature' or bug?\n\n```q\n.p.eval[\"print\"] t:([] a: 1 2; b: 1 2)\n.p.eval[\"print\"] flip t\n```\n\nboth print:\n```\n{'a': array([1, 1]), 'b': array([2, 2])}\n```\n\nAs far as I can tell, this isn't documented. It feels like a bug given `.j.j` behaves the way I'd expect:\n```q\n.j.j t\n```\nprints (with formatted quotes so it's readable):\n```\n'[{\"a\":1,\"b\":1},{\"a\":2,\"b\":2}]'\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 65,
    "metadata": {
      "issue_number": 121,
      "state": "open",
      "labels": [],
      "comments_count": 0,
      "created_at": "2025-10-23T16:32:50Z",
      "updated_at": "2025-10-23T16:32:50Z",
      "closed_at": null,
      "author": "benlubas",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-b86f3575fda3",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/115",
    "title": "Failure to launch on Python 3.10",
    "text": "# Failure to launch on Python 3.10\n\nError being thrown:\r\n\r\n```q\r\n'embedPy requires python 3.6 or higher on windows\r\n```\r\n\r\nIssue is test case:\r\n\r\n```q\r\nq)`3.6>`3.10\r\n1b\r\n```",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 28,
    "metadata": {
      "issue_number": 115,
      "state": "closed",
      "labels": [],
      "comments_count": 0,
      "created_at": "2022-09-20T09:31:42Z",
      "updated_at": "2024-06-14T09:52:31Z",
      "closed_at": "2024-06-14T09:52:31Z",
      "author": "rianoc",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-e87cd0ea3ef7",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/96",
    "title": "Issue when running test.q",
    "text": "# Issue when running test.q\n\nHi, I followed the instructions and tried to run `test.q` on Windows 10 but ran into issue, here is the output I get\r\n\r\n```\r\nKDB+ 4.0 2020.05.04 Copyright (C) 1993-2020 Kx Systems\r\nw64/ 12(16)core 16111MB George desktop-ri3u9lo 10.0.0.197 EXPIRE 2021.10.14 h.george16@yahoo.com KOD #4173422\r\n\r\n'[\r\n  [5]  C:\\q\\p.q:13:\r\n if[count M;if[k~key k:`$\":\",M;L::M]];\r\n .p:(`:./p 2:(`init;2))[L;H]\r\n                           ^\r\nq.p))\r\n```\r\n\r\nNot sure what is wrong here... Thank you.\r\n\r\nUPDATE: it's actually something with `\\l p.q`, the error is as below\r\n\r\n```\r\nThe specified module could not be found.\r\n    [4]  .p:(`:./p 2:(`init;2))[L;H]\r\n```\r\n\r\nNVM, it somehow worked now...",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 96,
    "metadata": {
      "issue_number": 96,
      "state": "closed",
      "labels": [],
      "comments_count": 0,
      "created_at": "2020-10-17T16:19:58Z",
      "updated_at": "2020-10-17T18:19:00Z",
      "closed_at": "2020-10-17T18:19:00Z",
      "author": "hgeorge21",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-686031a7ed4a",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/87",
    "title": "Virtual environment support",
    "text": "# Virtual environment support\n\n* The addition of support for virtual environments as released in `1.3.3` (now revoked) added a bug raised in issue #86 \r\n* The code which had been added to `py.c` and `p.q` is as follows\r\n\r\n`py.c`\r\n```\r\nEXP K3(init){ZI i=0,tr=1;I f,g;S l,h;K n,v;P a,b,pyhome;P(i,0)l=zs(x),h=zs(y);f=pyl(l);free(l);\r\n P(!f,krr(\"libpython\"))((tr==z->i)?Py_SetPythonHome:Py_SetProgramName)(Py_DecodeLocale(h,0))\r\n```\r\n\r\n`p.q`\r\n```\r\n c:\"-c \\\"\",pr[$[.z.o like\"w*\";sc[\"/python\";`BINDIR`VERSION],\"+'.dll'\";sc[\"/\";`LIBDIR`INSTSONAME]]],pr[$[.z.o like\"m*\";sc[\"/\";`PYTHONFRAMEWORKPREFIX`INSTSONAME];.z.o like\"l*\";sc[\"/libpython\";`LIBDIR`LDVERSION],\"+'.so'\";\"''\"]],pr[\"__import__('sys').prefix\"],pr[\"__import__('sys').base_prefix\"],\"\\\"2>\",$[.z.o like\"w*\";\"nul <nul\";\"/dev/null\"];\r\n `L`M`H`B set'@[system\"python3 \",;c;{system\"python \",c}];if[count M;if[k~key k:`$\":\",M;L::M]];C:H~B;\r\n .p:(`:./p 2:(`init;3))[L;H;C]]\r\n```\r\n\r\nAppears to be an issue with with the collection of `PyDecodeLocale(h,0)` when associated with `Py_SetPythonHome`/`Py_SetProgramName` under certain circumstances the origin of which is still unknown.\r\n\r\nPrior testing indicated full operational behaviour in pyenv/venv/conda however given a number of users have raised an issue internally and on github (namely #85) this indicate that all cases aren't covered. Hence revoke of release 1.3.3 and upload of release 1.3.4 which reverts behaviour and updates CI tests for newer versions of python libraries and pip.\r\n\r\nWill attempt to replicate locally and fix as appropriate",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 158,
    "metadata": {
      "issue_number": 87,
      "state": "closed",
      "labels": [],
      "comments_count": 0,
      "created_at": "2020-05-26T19:45:53Z",
      "updated_at": "2021-05-21T15:13:52Z",
      "closed_at": "2021-05-21T15:13:52Z",
      "author": "cmccarthy1",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-25662f6aea17",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/66",
    "title": "\\\\",
    "text": "# \\\\\n\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 2,
    "metadata": {
      "issue_number": 66,
      "state": "closed",
      "labels": [],
      "comments_count": 0,
      "created_at": "2018-12-04T19:53:10Z",
      "updated_at": "2018-12-04T19:53:18Z",
      "closed_at": "2018-12-04T19:53:18Z",
      "author": "WillDaSilva",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-d893f13dd3e0",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/56",
    "title": "Tests fail on windows",
    "text": "# Tests fail on windows\n\nI'm getting messages like this when running the test script on Windows:\r\n```\r\n(kxtest) C:\\Users\\mcg\\Desktop\\embedPy\\tt>q test.q\r\nKDB+ 3.6 2018.05.16 Copyright (C) 1993-2018 Kx Systems\r\nw64/ 1()core 6143MB mcg desktop-cb8h04d 172.16.247.170 EXPIRE 2019.05.15 mgrant@anaconda.com KOD #5000002\r\n\r\n\r\n(kxtest) C:\\Users\\mcg\\Desktop\\embedPy\\tt>ERROR:\r\n test:\r\n  import resource\r\n message:\r\n  e: No module named 'resource'\r\n    [13] C:\\Users\\mcg\\Miniconda3\\envs\\kxtest\\q\\p.q:11: .p.e:{$[\"def\"~3#x;$[x[3]in\"<*>\";ei 3;eo];\"class\"~5#x;$[x[5]in\"*>\";ei 5;eo];eo]x}\r\n                                                             ^\r\n file:\r\n  tests/memory.t\r\n\r\nERROR:\r\n test:\r\n  initmem:pmem[];\r\n message:\r\n  eval: name 'resource' is not defined\r\n    [10] .t.pmem:{$[.z.o~`m64;0;$[R;.p.qeval\"resource.getrusage(resource.RUSAGE_SELF).ru_maxrss\";0]]}\r\n```\r\nClearly this is because `resource` is unix-specific. Its use will need to be bypassed on Windows.",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 88,
    "metadata": {
      "issue_number": 56,
      "state": "closed",
      "labels": [],
      "comments_count": 0,
      "created_at": "2018-07-18T05:58:52Z",
      "updated_at": "2018-08-22T10:02:23Z",
      "closed_at": "2018-08-22T10:02:23Z",
      "author": "mcg1969",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-08a69fc05270",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/43",
    "title": "ModuleNotFoundError when using embedPy with the venv module",
    "text": "# ModuleNotFoundError when using embedPy with the venv module\n\nUsing with system Python works fine:\r\n```\r\n$ echo 'p)print(2+2)' | q\r\n4\r\n```\r\nHowever, if I try to do the same in an empty virtual environment I get an error:\r\n```\r\npython3.6 -m venv env\r\nsource env/bin/activate\r\n(env) $ echo 'p)print(2+2)' | q\r\nFatal Python error: Py_Initialize: Unable to get the locale encoding\r\nModuleNotFoundError: No module named 'encodings'\r\n\r\nCurrent thread 0x00007f887ee51000 (most recent call first):\r\nAborted\r\n```\r\n\r\nA similar issue was reported here: https://bugs.python.org/issue22213\r\n\r\nThe conclusion was this workaround which uses Py_SetPythonHome for virtualenv and Py_SetProgramName for venv:\r\n\r\nhttps://github.com/GrahamDumpleton/mod_wsgi/blob/a4ddd9fd9f8fcc60d5da267d8c510d1759cf7b59/src/server/wsgi_interp.c#L2282-L2316\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 99,
    "metadata": {
      "issue_number": 43,
      "state": "closed",
      "labels": [],
      "comments_count": 0,
      "created_at": "2018-05-16T11:14:56Z",
      "updated_at": "2020-01-21T10:50:40Z",
      "closed_at": "2020-01-21T10:50:40Z",
      "author": "simon-graham",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-452a5671dd37",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/36",
    "title": "Any plan for supporting Windows?",
    "text": "# Any plan for supporting Windows?\n\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 6,
    "metadata": {
      "issue_number": 36,
      "state": "closed",
      "labels": [],
      "comments_count": 0,
      "created_at": "2018-03-17T09:03:23Z",
      "updated_at": "2018-03-29T00:34:13Z",
      "closed_at": "2018-03-29T00:34:13Z",
      "author": "drzwz",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-2ce243eb3b97",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/17",
    "title": "Make embedPy more friendly to pyq",
    "text": "# Make embedPy more friendly to pyq\n\nThis issue is a companion to  KxSystems/pyq#30, an issue to start distributing embedPy to PyQ users.\r\n\r\n# An overview of pyq installation\r\n\r\nWhile we are striving to make simple `pip install pyq` to work for most users who have both python and kdb+ installed on both systems, we recommend that users dedicate a virtual environment to pyq and install a copy of kdb+ in `$VIRTUAL_ENV/q`.\r\n\r\n# A plan to include embedPy\r\n\r\n[TODO] (See  KxSystems/pyq#30)\r\n\r\n# Differences between pyq and embedPy requirements\r\n\r\n1. PyQ supports Python 2.7 and 3.x, but embedPy appears to support recent versions of Python 3.x only.\r\n2. PyQ C code is written to compile with `-Werror` on `gcc` and `clang` as well as VS 2007 and VS 2017 on Windows.\r\n3. While PyQ interoperates with numpy, building or running pyq does not require that numpy is installed.  Currently, embedPy requires that numpy is installed or configure fails.\r\n\r\n# Requests for enhancements\r\n\r\n1. Segregate numpy related code in a separate module.\r\n2. ...",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 172,
    "metadata": {
      "issue_number": 17,
      "state": "closed",
      "labels": [
        "enhancement"
      ],
      "comments_count": 0,
      "created_at": "2017-11-13T21:23:34Z",
      "updated_at": "2024-06-14T09:58:48Z",
      "closed_at": "2024-06-14T09:58:48Z",
      "author": "abalkin",
      "top_comments": [],
      "is_feature_request": true,
      "is_bug": false
    }
  },
  {
    "id": "kx-github_issue-a544cc910ea6",
    "origin": "kx",
    "source_type": "github_issue",
    "url": "https://github.com/KxSystems/embedPy/issues/5",
    "title": "Loading p.q fails in a virtual environment",
    "text": "# Loading p.q fails in a virtual environment\n\n```\r\nq)\\l p.q\r\nImportError: numpy.core.multiarray failed to import\r\nk){0N!x y}\r\n'p.c:90 init numpy\r\n```\r\n\r\nNumpy is installed and working:\r\n\r\n```\r\npython -c 'import numpy as np;print(np.__version__)'\r\n1.13.3\r\n```\r\n\r\nLooking at the generated makefile, I see that PH is set to the parent python location, while numpy is installed in a virtual environment.\r\n\r\nManually setting PH to a string returned by\r\n```\r\npython -c \"import sys; print('%s:%s' % (sys.prefix,sys.exec_prefix))\"\r\n```\r\nfixed the problem.  I'll submit a PR with a patch for configure.q.\r\n\r\n",
    "scraped_date": "2026-02-22",
    "content_date": null,
    "topics": [],
    "subtopics": [],
    "credibility": "community",
    "sentiment": "neutral",
    "word_count": 89,
    "metadata": {
      "issue_number": 5,
      "state": "closed",
      "labels": [],
      "comments_count": 0,
      "created_at": "2017-11-09T02:15:25Z",
      "updated_at": "2017-11-09T07:59:12Z",
      "closed_at": "2017-11-09T07:59:12Z",
      "author": "abalkin",
      "top_comments": [],
      "is_feature_request": false,
      "is_bug": false
    }
  }
]